import "./chunk-G3PMV62Z.js";

// node_modules/@daypilot/modal/src/searchable.js
var local = {};
(function(DayPilot) {
  "use strict";
  if (DayPilot.Searchable) {
    return;
  }
  var Searchable2 = function(options) {
    this.data = [];
    this.name = null;
    this.theme = "searchable_default";
    this._disabled = false;
    this.listZIndex = 1e5;
    this.onSelect = null;
    this._selected = null;
    this._highlighted = null;
    this._collapsed = false;
    this._input = null;
    this._list = null;
    this._options = [];
    this._hidden = null;
    options = options || {};
    var t = this;
    var specialHandling = {
      "selected": {
        post: function(val) {
          if (typeof val === "object" && val.id) {
            t._selected = val;
          } else if (typeof val === "string" || typeof val === "number") {
            t.select(val);
          }
        }
      }
    };
    Object.defineProperty(this, "selected", {
      get: function() {
        return this._selected;
      }
    });
    Object.defineProperty(this, "disabled", {
      get: function() {
        return this._disabled;
      },
      set: function(val) {
        this._disabled = val;
        if (this._input) {
          this._input.disabled = val;
          if (val) {
            this._cancel();
          }
        }
      }
    });
    for (var name in options) {
      if (!specialHandling[name]) {
        this[name] = options[name];
      }
    }
    for (var name in options) {
      if (specialHandling[name]) {
        specialHandling[name].post(options[name]);
      }
    }
  };
  Searchable2.prototype.select = function(id) {
    this._selected = this.data.find(function(item) {
      return item.id === id;
    });
    this._doOnSelect(false);
    return this;
  };
  Searchable2.prototype.create = function() {
    var component = this;
    var t = this;
    var div = document.createElement("div");
    div.className = this.theme + "_main";
    div.style.position = "relative";
    var icon = document.createElement("div");
    icon.className = this.theme + "_icon";
    icon.style.position = "absolute";
    icon.style.right = "0";
    icon.style.top = "0";
    icon.style.bottom = "0";
    icon.style.width = "20px";
    icon.addEventListener("mousedown", function(ev) {
      ev.preventDefault();
      if (component._collapsed) {
        component.focus();
        expand();
      } else {
        cancel();
        collapse();
      }
    });
    var list = document.createElement("div");
    list.className = this.theme + "_list";
    list.style.display = "none";
    list.style.position = "absolute";
    list.style.zIndex = this.listZIndex;
    var hidden = document.createElement("input");
    hidden.type = "hidden";
    hidden.name = this.name;
    hidden.searchable = t;
    this._hidden = hidden;
    var input = document.createElement("input");
    input.type = "text";
    input.className = this.theme + "_input";
    input.disabled = this._disabled;
    input.addEventListener("click", function(ev) {
      expand();
    });
    input.addEventListener("focus", function(ev) {
      filter("all");
    });
    input.addEventListener("input", function(ev) {
      filter();
    });
    input.addEventListener("blur", function(ev) {
      input.removeAttribute("readonly");
      cancel();
    });
    input.addEventListener("keydown", function(ev) {
      if (component._collapsed) {
        if (ev.key === "Enter") {
          return;
        }
        if (ev.key === "Esc" || ev.key === "Escape") {
          return;
        }
        expand();
      }
      if (ev.key === "ArrowDown") {
        var index = t._options.indexOf(t._highlighted);
        if (index + 1 < t._options.length) {
          t._highlighted = t._options[index + 1];
        }
        updateHiglight();
      } else if (ev.key === "ArrowUp") {
        var index = t._options.indexOf(t._highlighted);
        if (index - 1 >= 0) {
          t._highlighted = t._options[index - 1];
        }
        updateHiglight();
      } else if (ev.key === "Enter") {
        if (component._highlighted) {
          ev.stopPropagation();
          selectOption(component._highlighted);
        } else {
          ev.stopPropagation();
          cancel();
          collapse();
        }
      } else if (ev.key === "Esc" || ev.key === "Escape") {
        ev.stopPropagation();
        cancel();
        collapse();
      }
    });
    this._input = input;
    this._list = list;
    if (!this._selected) {
      this._selected = this.data[0];
      if (this._selected) {
        input.value = this._selected.name;
      }
    }
    function filter(strategy) {
      var defaultStrategy = component.strategy;
      if (component.strategy !== "includes" && component.strategy !== "startsWith") {
        defaultStrategy = "includes";
      }
      strategy = strategy || defaultStrategy || "includes";
      list.style.display = "";
      list.style.top = input.offsetHeight + "px";
      list.style.left = "0px";
      list.style.width = input.offsetWidth + "px";
      list.innerHTML = "";
      list.addEventListener("mousedown", function(ev) {
        ev.preventDefault();
      });
      component._highlighted = null;
      component._options = [];
      var first = null;
      component.data.forEach(function(item) {
        var name = item.name || item.id;
        if (strategy === "includes") {
          if (name.toLowerCase().indexOf(input.value.toLowerCase()) === -1) {
            return;
          }
        } else if (strategy === "startsWith") {
          if (name.toLowerCase().indexOf(input.value.toLowerCase()) !== 0) {
            return;
          }
        } else if (strategy === "all") {
        }
        var option = document.createElement("div");
        option.className = component.theme + "_list_item";
        option.innerText = name;
        option.item = item;
        if (item === component._selected) {
          component._highlighted = option;
        }
        if (!first) {
          first = option;
        }
        option.addEventListener("mousedown", function(ev) {
          selectOption(option);
          ev.preventDefault();
        });
        option.addEventListener("mousemove", function(ev) {
          if (component._highlighted === option) {
            return;
          }
          component._highlighted = option;
          updateHiglight({ dontScroll: true });
        });
        list.appendChild(option);
        component._options.push(option);
      });
      if (!component._highlighted) {
        component._highlighted = first;
      }
      updateHiglight();
    }
    function updateHiglight(options) {
      options = options || {};
      var scrollIntoView = !options.dontScroll;
      var previous = document.querySelectorAll("." + component.theme + "_list_item_highlight");
      previous.forEach(function(p) {
        p.className = p.className.replace(component.theme + "_list_item_highlight", "");
      });
      if (component._highlighted) {
        component._highlighted.className += " " + component.theme + "_list_item_highlight";
        if (scrollIntoView && !isScrolledIntoView(component._highlighted, list)) {
          component._highlighted.scrollIntoView();
        }
      }
    }
    function isScrolledIntoView(target, viewport) {
      var tRect = target.getBoundingClientRect();
      var vRect = viewport.getBoundingClientRect();
      return tRect.top >= vRect.top && tRect.bottom <= vRect.bottom;
    }
    function selectOption(option) {
      var item = option.item;
      component._selected = item;
      component._doOnSelect(true);
      hide();
      collapse();
    }
    function cancel() {
      component._cancel();
    }
    function hide() {
      component._hide();
    }
    function collapse() {
      component._collapsed = true;
      input.setAttribute("readonly", "readonly");
      input.focus();
    }
    function expand() {
      component._collapsed = false;
      input.removeAttribute("readonly");
      input.select();
      filter("all");
    }
    div.appendChild(input);
    div.appendChild(icon);
    div.appendChild(hidden);
    div.appendChild(list);
    return div;
  };
  Searchable2.prototype._cancel = function() {
    this._hide();
    if (!this._selected) {
      this._input.value = "";
      this._doOnSelect(true);
    } else {
      this._input.value = this._selected.name;
    }
  };
  Searchable2.prototype.focus = function() {
    this._collapsed = true;
    this._input.setAttribute("readonly", "readonly");
    this._input.focus();
    this._cancel();
  };
  Searchable2.prototype._hide = function() {
    this._list.style.display = "none";
  };
  Searchable2.prototype._doOnSelect = function(byUser) {
    this._hidden.value = this.selected ? this.selected.id : null;
    if (this._selected) {
      this._input.value = this._selected.name;
    } else {
      this._input.value = "";
    }
    if (typeof this.onSelect === "function") {
      var args = {
        control: this,
        ui: byUser
      };
      this.onSelect(args);
    }
  };
  DayPilot.Searchable = Searchable2;
})(local);
var { Searchable } = local;

// node_modules/@daypilot/modal/src/locale.js
var local2 = {};
(function(DayPilot) {
  "use strict";
  if (typeof DayPilot.Locale !== "undefined") {
    return;
  }
  var replaceCharAt = function(str, index, character) {
    return str.substr(0, index) + character + str.substr(index + character.length);
  };
  DayPilot.Locale = function(id, config) {
    this.id = id;
    this.dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    this.dayNamesShort = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"];
    this.monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    this.monthNamesShort = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    this.datePattern = "M/d/yyyy";
    this.timePattern = "H:mm";
    this.dateTimePattern = "M/d/yyyy H:mm";
    this.timeFormat = "Clock12Hours";
    this.weekStarts = 0;
    if (config) {
      for (var name in config) {
        this[name] = config[name];
      }
    }
  };
  DayPilot.Locale.all = {};
  DayPilot.Locale.find = function(id) {
    if (!id) {
      return null;
    }
    var normalized = id.toLowerCase();
    if (normalized.length > 2) {
      normalized = replaceCharAt(normalized, 2, "-");
    }
    return DayPilot.Locale.all[normalized];
  };
  DayPilot.Locale.register = function(locale) {
    DayPilot.Locale.all[locale.id] = locale;
  };
  DayPilot.Locale.register(new DayPilot.Locale("ca-es", { "dayNames": ["diumenge", "dilluns", "dimarts", "dimecres", "dijous", "divendres", "dissabte"], "dayNamesShort": ["dg", "dl", "dt", "dc", "dj", "dv", "ds"], "monthNames": ["gener", "febrer", "març", "abril", "maig", "juny", "juliol", "agost", "setembre", "octubre", "novembre", "desembre", ""], "monthNamesShort": ["gen.", "febr.", "març", "abr.", "maig", "juny", "jul.", "ag.", "set.", "oct.", "nov.", "des.", ""], "timePattern": "H:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("cs-cz", { "dayNames": ["neděle", "pondělí", "úterý", "středa", "čtvrtek", "pátek", "sobota"], "dayNamesShort": ["ne", "po", "út", "st", "čt", "pá", "so"], "monthNames": ["leden", "únor", "březen", "duben", "květen", "červen", "červenec", "srpen", "září", "říjen", "listopad", "prosinec", ""], "monthNamesShort": ["I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX", "X", "XI", "XII", ""], "timePattern": "H:mm", "datePattern": "d. M. yyyy", "dateTimePattern": "d. M. yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("da-dk", { "dayNames": ["søndag", "mandag", "tirsdag", "onsdag", "torsdag", "fredag", "lørdag"], "dayNamesShort": ["sø", "ma", "ti", "on", "to", "fr", "lø"], "monthNames": ["januar", "februar", "marts", "april", "maj", "juni", "juli", "august", "september", "oktober", "november", "december", ""], "monthNamesShort": ["jan", "feb", "mar", "apr", "maj", "jun", "jul", "aug", "sep", "okt", "nov", "dec", ""], "timePattern": "HH:mm", "datePattern": "dd-MM-yyyy", "dateTimePattern": "dd-MM-yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("de-at", { "dayNames": ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"], "dayNamesShort": ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], "monthNames": ["Jänner", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember", ""], "monthNamesShort": ["Jän", "Feb", "Mär", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("de-ch", { "dayNames": ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"], "dayNamesShort": ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], "monthNames": ["Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember", ""], "monthNamesShort": ["Jan", "Feb", "Mrz", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("de-de", { "dayNames": ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"], "dayNamesShort": ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], "monthNames": ["Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember", ""], "monthNamesShort": ["Jan", "Feb", "Mrz", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("de-lu", { "dayNames": ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"], "dayNamesShort": ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], "monthNames": ["Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember", ""], "monthNamesShort": ["Jan", "Feb", "Mrz", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("en-au", { "dayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "dayNamesShort": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "monthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "monthNamesShort": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "timePattern": "h:mm tt", "datePattern": "d/MM/yyyy", "dateTimePattern": "d/MM/yyyy h:mm tt", "timeFormat": "Clock12Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("en-ca", { "dayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "dayNamesShort": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "monthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "monthNamesShort": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "timePattern": "h:mm tt", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd h:mm tt", "timeFormat": "Clock12Hours", "weekStarts": 0 }));
  DayPilot.Locale.register(new DayPilot.Locale("en-gb", { "dayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "dayNamesShort": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "monthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "monthNamesShort": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("en-us", { "dayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "dayNamesShort": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "monthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "monthNamesShort": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "timePattern": "h:mm tt", "datePattern": "M/d/yyyy", "dateTimePattern": "M/d/yyyy h:mm tt", "timeFormat": "Clock12Hours", "weekStarts": 0 }));
  DayPilot.Locale.register(new DayPilot.Locale("es-es", { "dayNames": ["domingo", "lunes", "martes", "miércoles", "jueves", "viernes", "sábado"], "dayNamesShort": ["D", "L", "M", "X", "J", "V", "S"], "monthNames": ["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre", ""], "monthNamesShort": ["ene.", "feb.", "mar.", "abr.", "may.", "jun.", "jul.", "ago.", "sep.", "oct.", "nov.", "dic.", ""], "timePattern": "H:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("es-mx", { "dayNames": ["domingo", "lunes", "martes", "miércoles", "jueves", "viernes", "sábado"], "dayNamesShort": ["do.", "lu.", "ma.", "mi.", "ju.", "vi.", "sá."], "monthNames": ["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre", ""], "monthNamesShort": ["ene.", "feb.", "mar.", "abr.", "may.", "jun.", "jul.", "ago.", "sep.", "oct.", "nov.", "dic.", ""], "timePattern": "hh:mm tt", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy hh:mm tt", "timeFormat": "Clock12Hours", "weekStarts": 0 }));
  DayPilot.Locale.register(new DayPilot.Locale("eu-es", { "dayNames": ["igandea", "astelehena", "asteartea", "asteazkena", "osteguna", "ostirala", "larunbata"], "dayNamesShort": ["ig", "al", "as", "az", "og", "or", "lr"], "monthNames": ["urtarrila", "otsaila", "martxoa", "apirila", "maiatza", "ekaina", "uztaila", "abuztua", "iraila", "urria", "azaroa", "abendua", ""], "monthNamesShort": ["urt.", "ots.", "mar.", "api.", "mai.", "eka.", "uzt.", "abu.", "ira.", "urr.", "aza.", "abe.", ""], "timePattern": "H:mm", "datePattern": "yyyy/MM/dd", "dateTimePattern": "yyyy/MM/dd H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("fi-fi", { "dayNames": ["sunnuntai", "maanantai", "tiistai", "keskiviikko", "torstai", "perjantai", "lauantai"], "dayNamesShort": ["su", "ma", "ti", "ke", "to", "pe", "la"], "monthNames": ["tammikuu", "helmikuu", "maaliskuu", "huhtikuu", "toukokuu", "kesäkuu", "heinäkuu", "elokuu", "syyskuu", "lokakuu", "marraskuu", "joulukuu", ""], "monthNamesShort": ["tammi", "helmi", "maalis", "huhti", "touko", "kesä", "heinä", "elo", "syys", "loka", "marras", "joulu", ""], "timePattern": "H:mm", "datePattern": "d.M.yyyy", "dateTimePattern": "d.M.yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("fr-be", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "dd-MM-yy", "dateTimePattern": "dd-MM-yy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("fr-ca", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 0 }));
  DayPilot.Locale.register(new DayPilot.Locale("fr-ch", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("fr-fr", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("fr-lu", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("gl-es", { "dayNames": ["domingo", "luns", "martes", "mércores", "xoves", "venres", "sábado"], "dayNamesShort": ["do", "lu", "ma", "mé", "xo", "ve", "sá"], "monthNames": ["xaneiro", "febreiro", "marzo", "abril", "maio", "xuño", "xullo", "agosto", "setembro", "outubro", "novembro", "decembro", ""], "monthNamesShort": ["xan", "feb", "mar", "abr", "maio", "xuño", "xul", "ago", "set", "out", "nov", "dec", ""], "timePattern": "H:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("it-it", { "dayNames": ["domenica", "lunedì", "martedì", "mercoledì", "giovedì", "venerdì", "sabato"], "dayNamesShort": ["do", "lu", "ma", "me", "gi", "ve", "sa"], "monthNames": ["gennaio", "febbraio", "marzo", "aprile", "maggio", "giugno", "luglio", "agosto", "settembre", "ottobre", "novembre", "dicembre", ""], "monthNamesShort": ["gen", "feb", "mar", "apr", "mag", "giu", "lug", "ago", "set", "ott", "nov", "dic", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("it-ch", { "dayNames": ["domenica", "lunedì", "martedì", "mercoledì", "giovedì", "venerdì", "sabato"], "dayNamesShort": ["do", "lu", "ma", "me", "gi", "ve", "sa"], "monthNames": ["gennaio", "febbraio", "marzo", "aprile", "maggio", "giugno", "luglio", "agosto", "settembre", "ottobre", "novembre", "dicembre", ""], "monthNamesShort": ["gen", "feb", "mar", "apr", "mag", "giu", "lug", "ago", "set", "ott", "nov", "dic", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("ja-jp", { "dayNames": ["日曜日", "月曜日", "火曜日", "水曜日", "木曜日", "金曜日", "土曜日"], "dayNamesShort": ["日", "月", "火", "水", "木", "金", "土"], "monthNames": ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月", ""], "monthNamesShort": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", ""], "timePattern": "H:mm", "datePattern": "yyyy/MM/dd", "dateTimePattern": "yyyy/MM/dd H:mm", "timeFormat": "Clock24Hours", "weekStarts": 0 }));
  DayPilot.Locale.register(new DayPilot.Locale("ko-kr", { "dayNames": ["일요일", "월요일", "화요일", "수요일", "목요일", "금요일", "토요일"], "dayNamesShort": ["일", "월", "화", "수", "목", "금", "토"], "monthNames": ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월", ""], "monthNamesShort": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", ""], "timePattern": "tt h:mm", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd tt h:mm", "timeFormat": "Clock12Hours", "weekStarts": 0 }));
  DayPilot.Locale.register(new DayPilot.Locale("nb-no", { "dayNames": ["søndag", "mandag", "tirsdag", "onsdag", "torsdag", "fredag", "lørdag"], "dayNamesShort": ["sø", "ma", "ti", "on", "to", "fr", "lø"], "monthNames": ["januar", "februar", "mars", "april", "mai", "juni", "juli", "august", "september", "oktober", "november", "desember", ""], "monthNamesShort": ["jan", "feb", "mar", "apr", "mai", "jun", "jul", "aug", "sep", "okt", "nov", "des", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("nl-nl", { "dayNames": ["zondag", "maandag", "dinsdag", "woensdag", "donderdag", "vrijdag", "zaterdag"], "dayNamesShort": ["zo", "ma", "di", "wo", "do", "vr", "za"], "monthNames": ["januari", "februari", "maart", "april", "mei", "juni", "juli", "augustus", "september", "oktober", "november", "december", ""], "monthNamesShort": ["jan", "feb", "mrt", "apr", "mei", "jun", "jul", "aug", "sep", "okt", "nov", "dec", ""], "timePattern": "HH:mm", "datePattern": "d-M-yyyy", "dateTimePattern": "d-M-yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("nl-be", { "dayNames": ["zondag", "maandag", "dinsdag", "woensdag", "donderdag", "vrijdag", "zaterdag"], "dayNamesShort": ["zo", "ma", "di", "wo", "do", "vr", "za"], "monthNames": ["januari", "februari", "maart", "april", "mei", "juni", "juli", "augustus", "september", "oktober", "november", "december", ""], "monthNamesShort": ["jan", "feb", "mrt", "apr", "mei", "jun", "jul", "aug", "sep", "okt", "nov", "dec", ""], "timePattern": "H:mm", "datePattern": "d/MM/yyyy", "dateTimePattern": "d/MM/yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("nn-no", { "dayNames": ["søndag", "måndag", "tysdag", "onsdag", "torsdag", "fredag", "laurdag"], "dayNamesShort": ["sø", "må", "ty", "on", "to", "fr", "la"], "monthNames": ["januar", "februar", "mars", "april", "mai", "juni", "juli", "august", "september", "oktober", "november", "desember", ""], "monthNamesShort": ["jan", "feb", "mar", "apr", "mai", "jun", "jul", "aug", "sep", "okt", "nov", "des", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("pt-br", { "dayNames": ["domingo", "segunda-feira", "terça-feira", "quarta-feira", "quinta-feira", "sexta-feira", "sábado"], "dayNamesShort": ["D", "S", "T", "Q", "Q", "S", "S"], "monthNames": ["janeiro", "fevereiro", "março", "abril", "maio", "junho", "julho", "agosto", "setembro", "outubro", "novembro", "dezembro", ""], "monthNamesShort": ["jan", "fev", "mar", "abr", "mai", "jun", "jul", "ago", "set", "out", "nov", "dez", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 0 }));
  DayPilot.Locale.register(new DayPilot.Locale("pl-pl", { "dayNames": ["niedziela", "poniedziałek", "wtorek", "środa", "czwartek", "piątek", "sobota"], "dayNamesShort": ["N", "Pn", "Wt", "Śr", "Cz", "Pt", "So"], "monthNames": ["styczeń", "luty", "marzec", "kwiecień", "maj", "czerwiec", "lipiec", "sierpień", "wrzesień", "październik", "listopad", "grudzień", ""], "monthNamesShort": ["sty", "lut", "mar", "kwi", "maj", "cze", "lip", "sie", "wrz", "paź", "lis", "gru", ""], "timePattern": "HH:mm", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("pt-pt", { "dayNames": ["domingo", "segunda-feira", "terça-feira", "quarta-feira", "quinta-feira", "sexta-feira", "sábado"], "dayNamesShort": ["D", "S", "T", "Q", "Q", "S", "S"], "monthNames": ["janeiro", "fevereiro", "março", "abril", "maio", "junho", "julho", "agosto", "setembro", "outubro", "novembro", "dezembro", ""], "monthNamesShort": ["jan", "fev", "mar", "abr", "mai", "jun", "jul", "ago", "set", "out", "nov", "dez", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 0 }));
  DayPilot.Locale.register(new DayPilot.Locale("ro-ro", { "dayNames": ["duminică", "luni", "marți", "miercuri", "joi", "vineri", "sâmbătă"], "dayNamesShort": ["D", "L", "Ma", "Mi", "J", "V", "S"], "monthNames": ["ianuarie", "februarie", "martie", "aprilie", "mai", "iunie", "iulie", "august", "septembrie", "octombrie", "noiembrie", "decembrie", ""], "monthNamesShort": ["ian.", "feb.", "mar.", "apr.", "mai.", "iun.", "iul.", "aug.", "sep.", "oct.", "nov.", "dec.", ""], "timePattern": "H:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("ru-ru", { "dayNames": ["воскресенье", "понедельник", "вторник", "среда", "четверг", "пятница", "суббота"], "dayNamesShort": ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"], "monthNames": ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь", ""], "monthNamesShort": ["янв", "фев", "мар", "апр", "май", "июн", "июл", "авг", "сен", "окт", "ноя", "дек", ""], "timePattern": "H:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("sk-sk", { "dayNames": ["nedeľa", "pondelok", "utorok", "streda", "štvrtok", "piatok", "sobota"], "dayNamesShort": ["ne", "po", "ut", "st", "št", "pi", "so"], "monthNames": ["január", "február", "marec", "apríl", "máj", "jún", "júl", "august", "september", "október", "november", "december", ""], "monthNamesShort": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", ""], "timePattern": "H:mm", "datePattern": "d.M.yyyy", "dateTimePattern": "d.M.yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("sv-se", { "dayNames": ["söndag", "måndag", "tisdag", "onsdag", "torsdag", "fredag", "lördag"], "dayNamesShort": ["sö", "må", "ti", "on", "to", "fr", "lö"], "monthNames": ["januari", "februari", "mars", "april", "maj", "juni", "juli", "augusti", "september", "oktober", "november", "december", ""], "monthNamesShort": ["jan", "feb", "mar", "apr", "maj", "jun", "jul", "aug", "sep", "okt", "nov", "dec", ""], "timePattern": "HH:mm", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("tr-tr", { "dayNames": ["Pazar", "Pazartesi", "Salı", "Çarşamba", "Perşembe", "Cuma", "Cumartesi"], "dayNamesShort": ["Pz", "Pt", "Sa", "Ça", "Pe", "Cu", "Ct"], "monthNames": ["Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık", ""], "monthNamesShort": ["Oca", "Şub", "Mar", "Nis", "May", "Haz", "Tem", "Ağu", "Eyl", "Eki", "Kas", "Ara", ""], "timePattern": "HH:mm", "datePattern": "d.M.yyyy", "dateTimePattern": "d.M.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.register(new DayPilot.Locale("zh-cn", { "dayNames": ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"], "dayNamesShort": ["日", "一", "二", "三", "四", "五", "六"], "monthNames": ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月", ""], "monthNamesShort": ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月", ""], "timePattern": "H:mm", "datePattern": "yyyy/M/d", "dateTimePattern": "yyyy/M/d H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 }));
  DayPilot.Locale.US = DayPilot.Locale.find("en-us");
})(local2);
var { Locale } = local2;

// node_modules/@daypilot/modal/src/date.js
var local3 = {
  Locale
};
(function(DayPilot) {
  if (typeof DayPilot.Date !== "undefined") {
    return;
  }
  var isNullOrUndefined = function(val) {
    return val === null || typeof val === "undefined";
  };
  DayPilot.Duration = function(ticks) {
    var d = this;
    var day = 1e3 * 60 * 60 * 24;
    var hour = 1e3 * 60 * 60;
    var minute = 1e3 * 60;
    var second = 1e3;
    if (arguments.length === 2) {
      var start = arguments[0];
      var end = arguments[1];
      if (!(start instanceof DayPilot.Date) && typeof start !== "string") {
        throw "DayPilot.Duration(): Invalid start argument, DayPilot.Date expected";
      }
      if (!(end instanceof DayPilot.Date) && typeof end !== "string") {
        throw "DayPilot.Duration(): Invalid end argument, DayPilot.Date expected";
      }
      if (typeof start === "string") {
        start = new DayPilot.Date(start);
      }
      if (typeof end === "string") {
        end = new DayPilot.Date(end);
      }
      ticks = end.getTime() - start.getTime();
    }
    this.ticks = ticks;
    if (DayPilot.Date.Cache.DurationCtor["" + ticks]) {
      return DayPilot.Date.Cache.DurationCtor["" + ticks];
    }
    DayPilot.Date.Cache.DurationCtor["" + ticks] = this;
    this.toString = function(pattern) {
      if (!pattern) {
        return d.days() + "." + d.hours() + ":" + d.minutes() + ":" + d.seconds() + "." + d.milliseconds();
      }
      var minutes = d.minutes();
      minutes = (minutes < 10 ? "0" : "") + minutes;
      var result = pattern;
      result = result.replace("mm", minutes);
      result = result.replace("m", d.minutes());
      result = result.replace("H", d.hours());
      result = result.replace("h", d.hours());
      result = result.replace("d", d.days());
      result = result.replace("s", d.seconds());
      return result;
    };
    this.totalHours = function() {
      return d.ticks / hour;
    };
    this.totalDays = function() {
      return d.ticks / day;
    };
    this.totalMinutes = function() {
      return d.ticks / minute;
    };
    this.totalSeconds = function() {
      return d.ticks / second;
    };
    this.days = function() {
      return Math.floor(d.totalDays());
    };
    this.hours = function() {
      var hourPartTicks = d.ticks - d.days() * day;
      return Math.floor(hourPartTicks / hour);
    };
    this.minutes = function() {
      var minutePartTicks = d.ticks - Math.floor(d.totalHours()) * hour;
      return Math.floor(minutePartTicks / minute);
    };
    this.seconds = function() {
      var secondPartTicks = d.ticks - Math.floor(d.totalMinutes()) * minute;
      return Math.floor(secondPartTicks / second);
    };
    this.milliseconds = function() {
      return d.ticks % second;
    };
  };
  DayPilot.Duration.weeks = function(i) {
    return new DayPilot.Duration(i * 1e3 * 60 * 60 * 24 * 7);
  };
  DayPilot.Duration.days = function(i) {
    return new DayPilot.Duration(i * 1e3 * 60 * 60 * 24);
  };
  DayPilot.Duration.hours = function(i) {
    return new DayPilot.Duration(i * 1e3 * 60 * 60);
  };
  DayPilot.Duration.minutes = function(i) {
    return new DayPilot.Duration(i * 1e3 * 60);
  };
  DayPilot.Duration.seconds = function(i) {
    return new DayPilot.Duration(i * 1e3);
  };
  DayPilot.TimeSpan = function() {
    throw "Please use DayPilot.Duration class instead of DayPilot.TimeSpan.";
  };
  try {
    DayPilot.TimeSpan.prototype = Object.create(DayPilot.Duration.prototype);
  } catch (e) {
  }
  DayPilot.Date = function(date, readLocal) {
    if (date instanceof DayPilot.Date) {
      return date;
    }
    var ticks;
    if (isNullOrUndefined(date)) {
      ticks = DayPilot.DateUtil.fromLocal().getTime();
      date = ticks;
    }
    var cache = DayPilot.Date.Cache.Ctor;
    if (cache[date]) {
      return cache[date];
    }
    var isString = false;
    if (typeof date === "string") {
      try {
        ticks = DayPilot.DateUtil.fromStringSortable(date, readLocal).getTime();
      } catch (e) {
        throw new Error("DayPilot.Date - Unable to parse ISO8601 date/time string: " + date);
      }
      isString = true;
    } else if (typeof date === "number") {
      if (isNaN(date)) {
        throw "Cannot create DayPilot.Date from NaN";
      }
      ticks = date;
    } else if (date instanceof Date) {
      if (readLocal) {
        ticks = DayPilot.DateUtil.fromLocal(date).getTime();
      } else {
        ticks = date.getTime();
      }
    } else {
      throw "Unrecognized parameter: use Date, number or string in ISO 8601 format";
    }
    var value = ticksToSortable(ticks);
    if (cache[value]) {
      return cache[value];
    }
    cache[value] = this;
    cache[ticks] = this;
    if (isString && value !== date && DayPilot.DateUtil.hasTzSpec(date)) {
      cache[date] = this;
    }
    if (Object.defineProperty) {
      Object.defineProperty(this, "ticks", {
        get: function() {
          return ticks;
        }
      });
      Object.defineProperty(this, "value", {
        "value": value,
        "writable": false,
        "enumerable": true
      });
    } else {
      this.ticks = ticks;
      this.value = value;
    }
    if (DayPilot.Date.Config.legacyShowD) {
      this.d = new Date(ticks);
    }
  };
  DayPilot.Date.Config = {};
  DayPilot.Date.Config.legacyShowD = false;
  DayPilot.Date.Cache = {};
  DayPilot.Date.Cache.Parsing = {};
  DayPilot.Date.Cache.Ctor = {};
  DayPilot.Date.Cache.Ticks = {};
  DayPilot.Date.Cache.DurationCtor = {};
  DayPilot.Date.Cache.clear = function() {
    DayPilot.Date.Cache.Parsing = {};
    DayPilot.Date.Cache.Ctor = {};
    DayPilot.Date.Cache.Ticks = {};
    DayPilot.Date.Cache.DurationCtor = {};
  };
  DayPilot.Date.prototype.addDays = function(days) {
    if (!days) {
      return this;
    }
    return new DayPilot.Date(this.ticks + days * 24 * 60 * 60 * 1e3);
  };
  DayPilot.Date.prototype.addHours = function(hours) {
    if (!hours) {
      return this;
    }
    return this.addTime(hours * 60 * 60 * 1e3);
  };
  DayPilot.Date.prototype.addMilliseconds = function(millis) {
    if (!millis) {
      return this;
    }
    return this.addTime(millis);
  };
  DayPilot.Date.prototype.addMinutes = function(minutes) {
    if (!minutes) {
      return this;
    }
    return this.addTime(minutes * 60 * 1e3);
  };
  DayPilot.Date.prototype.addMonths = function(months) {
    if (!months) {
      return this;
    }
    var date = new Date(this.ticks);
    var y = date.getUTCFullYear();
    var m = date.getUTCMonth() + 1;
    if (months > 0) {
      while (months >= 12) {
        months -= 12;
        y++;
      }
      if (months > 12 - m) {
        y++;
        m = months - (12 - m);
      } else {
        m += months;
      }
    } else {
      while (months <= -12) {
        months += 12;
        y--;
      }
      if (m + months <= 0) {
        y--;
        m = 12 + m + months;
      } else {
        m = m + months;
      }
    }
    var d = new Date(date.getTime());
    d.setUTCDate(1);
    d.setUTCFullYear(y);
    d.setUTCMonth(m - 1);
    var max = new DayPilot.Date(d).daysInMonth();
    d.setUTCDate(Math.min(max, date.getUTCDate()));
    return new DayPilot.Date(d);
  };
  DayPilot.Date.prototype.addSeconds = function(seconds) {
    if (!seconds) {
      return this;
    }
    return this.addTime(seconds * 1e3);
  };
  DayPilot.Date.prototype.addTime = function(ticks) {
    if (!ticks) {
      return this;
    }
    if (ticks instanceof DayPilot.Duration) {
      ticks = ticks.ticks;
    }
    return new DayPilot.Date(this.ticks + ticks);
  };
  DayPilot.Date.prototype.addYears = function(years) {
    var original = new Date(this.ticks);
    var d = new Date(this.ticks);
    var y = this.getYear() + years;
    var m = this.getMonth();
    d.setUTCDate(1);
    d.setUTCFullYear(y);
    d.setUTCMonth(m);
    var max = new DayPilot.Date(d).daysInMonth();
    d.setUTCDate(Math.min(max, original.getUTCDate()));
    return new DayPilot.Date(d);
  };
  DayPilot.Date.prototype.dayOfWeek = function() {
    return new Date(this.ticks).getUTCDay();
  };
  DayPilot.Date.prototype.getDayOfWeek = function() {
    return new Date(this.ticks).getUTCDay();
  };
  DayPilot.Date.prototype.getDayOfYear = function() {
    var first = this.firstDayOfYear();
    return DayPilot.DateUtil.daysDiff(first, this) + 1;
  };
  DayPilot.Date.prototype.daysInMonth = function() {
    var date = new Date(this.ticks);
    var month = date.getUTCMonth() + 1;
    var year = date.getUTCFullYear();
    var m = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    if (month !== 2)
      return m[month - 1];
    if (year % 4 !== 0)
      return m[1];
    if (year % 100 === 0 && year % 400 !== 0)
      return m[1];
    return m[1] + 1;
  };
  DayPilot.Date.prototype.daysInYear = function() {
    var year = this.getYear();
    if (year % 4 !== 0) {
      return 365;
    }
    if (year % 100 === 0 && year % 400 !== 0) {
      return 365;
    }
    return 366;
  };
  DayPilot.Date.prototype.dayOfYear = function() {
    return Math.ceil((this.getDatePart().getTime() - this.firstDayOfYear().getTime()) / 864e5) + 1;
  };
  DayPilot.Date.prototype.equals = function(another) {
    if (another === null) {
      return false;
    }
    if (another instanceof DayPilot.Date) {
      return this === another;
    } else {
      throw "The parameter must be a DayPilot.Date object (DayPilot.Date.equals())";
    }
  };
  DayPilot.Date.prototype.firstDayOfMonth = function() {
    var d = /* @__PURE__ */ new Date();
    d.setUTCFullYear(this.getYear(), this.getMonth(), 1);
    d.setUTCHours(0);
    d.setUTCMinutes(0);
    d.setUTCSeconds(0);
    d.setUTCMilliseconds(0);
    return new DayPilot.Date(d);
  };
  DayPilot.Date.prototype.firstDayOfYear = function() {
    var year = this.getYear();
    var d = /* @__PURE__ */ new Date();
    d.setUTCFullYear(year, 0, 1);
    d.setUTCHours(0);
    d.setUTCMinutes(0);
    d.setUTCSeconds(0);
    d.setUTCMilliseconds(0);
    return new DayPilot.Date(d);
  };
  DayPilot.Date.prototype.firstDayOfWeek = function(weekStarts) {
    var d = this;
    if (weekStarts instanceof DayPilot.Locale) {
      weekStarts = weekStarts.weekStarts;
    } else if (typeof weekStarts === "string" && DayPilot.Locale.find(weekStarts)) {
      var locale = DayPilot.Locale.find(weekStarts);
      weekStarts = locale.weekStarts;
    } else {
      weekStarts = weekStarts || 0;
    }
    var day = d.dayOfWeek();
    while (day !== weekStarts) {
      d = d.addDays(-1);
      day = d.dayOfWeek();
    }
    return new DayPilot.Date(d);
  };
  DayPilot.Date.prototype.getDay = function() {
    return new Date(this.ticks).getUTCDate();
  };
  DayPilot.Date.prototype.getDatePart = function() {
    var d = new Date(this.ticks);
    d.setUTCHours(0);
    d.setUTCMinutes(0);
    d.setUTCSeconds(0);
    d.setUTCMilliseconds(0);
    return new DayPilot.Date(d);
  };
  DayPilot.Date.prototype.getYear = function() {
    return new Date(this.ticks).getUTCFullYear();
  };
  DayPilot.Date.prototype.getHours = function() {
    return new Date(this.ticks).getUTCHours();
  };
  DayPilot.Date.prototype.getMilliseconds = function() {
    return new Date(this.ticks).getUTCMilliseconds();
  };
  DayPilot.Date.prototype.getMinutes = function() {
    return new Date(this.ticks).getUTCMinutes();
  };
  DayPilot.Date.prototype.getMonth = function() {
    return new Date(this.ticks).getUTCMonth();
  };
  DayPilot.Date.prototype.getSeconds = function() {
    return new Date(this.ticks).getUTCSeconds();
  };
  DayPilot.Date.prototype.getTotalTicks = function() {
    return this.getTime();
  };
  DayPilot.Date.prototype.getTime = function() {
    return this.ticks;
  };
  DayPilot.Date.prototype.getTimePart = function() {
    var datePart = this.getDatePart();
    return DayPilot.DateUtil.diff(this, datePart);
  };
  DayPilot.Date.prototype.lastDayOfMonth = function() {
    var d = new Date(this.firstDayOfMonth().getTime());
    var length = this.daysInMonth();
    d.setUTCDate(length);
    return new DayPilot.Date(d);
  };
  DayPilot.Date.prototype.weekNumber = function() {
    var first = this.firstDayOfYear();
    var days = (this.getTime() - first.getTime()) / 864e5;
    return Math.ceil((days + first.dayOfWeek() + 1) / 7);
  };
  DayPilot.Date.prototype.weekNumberISO = function() {
    var thursdayFlag = false;
    var dayOfYear = this.dayOfYear();
    var startWeekDayOfYear = this.firstDayOfYear().dayOfWeek();
    var endWeekDayOfYear = this.firstDayOfYear().addYears(1).addDays(-1).dayOfWeek();
    if (startWeekDayOfYear === 0) {
      startWeekDayOfYear = 7;
    }
    if (endWeekDayOfYear === 0) {
      endWeekDayOfYear = 7;
    }
    var daysInFirstWeek = 8 - startWeekDayOfYear;
    if (startWeekDayOfYear === 4 || endWeekDayOfYear === 4) {
      thursdayFlag = true;
    }
    var fullWeeks = Math.ceil((dayOfYear - daysInFirstWeek) / 7);
    var weekNumber = fullWeeks;
    if (daysInFirstWeek >= 4) {
      weekNumber = weekNumber + 1;
    }
    if (weekNumber > 52 && !thursdayFlag) {
      weekNumber = 1;
    }
    if (weekNumber === 0) {
      weekNumber = this.firstDayOfYear().addDays(-1).weekNumberISO();
    }
    return weekNumber;
  };
  DayPilot.Date.prototype.toDateLocal = function() {
    var date = new Date(this.ticks);
    var d = /* @__PURE__ */ new Date();
    d.setFullYear(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());
    d.setHours(date.getUTCHours());
    d.setMinutes(date.getUTCMinutes());
    d.setSeconds(date.getUTCSeconds());
    d.setMilliseconds(date.getUTCMilliseconds());
    return d;
  };
  DayPilot.Date.prototype.toDate = function() {
    return new Date(this.ticks);
  };
  DayPilot.Date.prototype.toJSON = function() {
    return this.value;
  };
  DayPilot.Date.prototype.toString = function(pattern, locale) {
    if (!pattern) {
      return this.toStringSortable();
    }
    return new Pattern(pattern, locale).print(this);
  };
  DayPilot.Date.prototype.toStringSortable = function() {
    return ticksToSortable(this.ticks);
  };
  function ticksToSortable(ticks) {
    var cache = DayPilot.Date.Cache.Ticks;
    if (cache[ticks]) {
      return cache[ticks];
    }
    var d = new Date(ticks);
    var millisecond;
    var ms = d.getUTCMilliseconds();
    if (ms === 0) {
      millisecond = "";
    } else if (ms < 10) {
      millisecond = ".00" + ms;
    } else if (ms < 100) {
      millisecond = ".0" + ms;
    } else {
      millisecond = "." + ms;
    }
    var second = d.getUTCSeconds();
    if (second < 10)
      second = "0" + second;
    var minute = d.getUTCMinutes();
    if (minute < 10)
      minute = "0" + minute;
    var hour = d.getUTCHours();
    if (hour < 10)
      hour = "0" + hour;
    var day = d.getUTCDate();
    if (day < 10)
      day = "0" + day;
    var month = d.getUTCMonth() + 1;
    if (month < 10)
      month = "0" + month;
    var year = d.getUTCFullYear();
    if (year <= 0) {
      throw "The minimum year supported is 1.";
    }
    if (year < 10) {
      year = "000" + year;
    } else if (year < 100) {
      year = "00" + year;
    } else if (year < 1e3) {
      year = "0" + year;
    }
    var result = year + "-" + month + "-" + day + "T" + hour + ":" + minute + ":" + second + millisecond;
    cache[ticks] = result;
    return result;
  }
  DayPilot.Date.parse = function(str, pattern, locale) {
    var p = new Pattern(pattern, locale);
    return p.parse(str);
  };
  var todayCount = 0;
  DayPilot.Date.today = function() {
    return new DayPilot.Date(DayPilot.DateUtil.localToday(), true);
  };
  DayPilot.Date.fromYearMonthDay = function(year, month, day) {
    month = month || 1;
    day = day || 1;
    var d = /* @__PURE__ */ new Date(0);
    d.setUTCFullYear(year);
    d.setUTCMonth(month - 1);
    d.setUTCDate(day);
    return new DayPilot.Date(d);
  };
  var Pattern = function(pattern, locale) {
    if (typeof locale === "string") {
      locale = DayPilot.Locale.find(locale);
    }
    var locale = locale || DayPilot.Locale.US;
    var all = [
      { "seq": "yyyy", "expr": "[0-9]{4,4}", "str": function(d) {
        return d.getYear();
      } },
      { "seq": "yy", "expr": "[0-9]{2,2}", "str": function(d) {
        return d.getYear() % 100;
      } },
      { "seq": "mm", "expr": "[0-9]{2,2}", "str": function(d) {
        var r = d.getMinutes();
        return r < 10 ? "0" + r : r;
      } },
      { "seq": "m", "expr": "[0-9]{1,2}", "str": function(d) {
        var r = d.getMinutes();
        return r;
      } },
      { "seq": "HH", "expr": "[0-9]{2,2}", "str": function(d) {
        var r = d.getHours();
        return r < 10 ? "0" + r : r;
      } },
      { "seq": "H", "expr": "[0-9]{1,2}", "str": function(d) {
        var r = d.getHours();
        return r;
      } },
      { "seq": "hh", "expr": "[0-9]{2,2}", "str": function(d) {
        var hour = d.getHours();
        var hour = hour % 12;
        if (hour === 0) {
          hour = 12;
        }
        var r = hour;
        return r < 10 ? "0" + r : r;
      } },
      { "seq": "h", "expr": "[0-9]{1,2}", "str": function(d) {
        var hour = d.getHours();
        var hour = hour % 12;
        if (hour === 0) {
          hour = 12;
        }
        return hour;
      } },
      { "seq": "ss", "expr": "[0-9]{2,2}", "str": function(d) {
        var r = d.getSeconds();
        return r < 10 ? "0" + r : r;
      } },
      { "seq": "s", "expr": "[0-9]{1,2}", "str": function(d) {
        var r = d.getSeconds();
        return r;
      } },
      { "seq": "MMMM", "expr": "[^\\s0-9]*", "str": function(d) {
        var r = locale.monthNames[d.getMonth()];
        return r;
      }, "transform": function(input) {
        var index = indexOf(locale.monthNames, input, equalsIgnoreCase);
        if (index < 0) {
          return null;
        }
        return index + 1;
      } },
      { "seq": "MMM", "expr": "[^\\s0-9]*", "str": function(d) {
        var r = locale.monthNamesShort[d.getMonth()];
        return r;
      }, "transform": function(input) {
        var index = indexOf(locale.monthNamesShort, input, equalsIgnoreCase);
        if (index < 0) {
          return null;
        }
        return index + 1;
      } },
      { "seq": "MM", "expr": "[0-9]{2,2}", "str": function(d) {
        var r = d.getMonth() + 1;
        return r < 10 ? "0" + r : r;
      } },
      { "seq": "M", "expr": "[0-9]{1,2}", "str": function(d) {
        var r = d.getMonth() + 1;
        return r;
      } },
      { "seq": "dddd", "expr": "[^\\s0-9]*", "str": function(d) {
        var r = locale.dayNames[d.getDayOfWeek()];
        return r;
      } },
      { "seq": "ddd", "expr": "[^\\s0-9]*", "str": function(d) {
        var r = locale.dayNamesShort[d.getDayOfWeek()];
        return r;
      } },
      { "seq": "dd", "expr": "[0-9]{2,2}", "str": function(d) {
        var r = d.getDay();
        return r < 10 ? "0" + r : r;
      } },
      { "seq": "%d", "expr": "[0-9]{1,2}", "str": function(d) {
        var r = d.getDay();
        return r;
      } },
      { "seq": "d", "expr": "[0-9]{1,2}", "str": function(d) {
        var r = d.getDay();
        return r;
      } },
      { "seq": "tt", "expr": "(AM|PM|am|pm)", "str": function(d) {
        var hour = d.getHours();
        var am = hour < 12;
        return am ? "AM" : "PM";
      }, "transform": function(input) {
        return input.toUpperCase();
      } }
    ];
    var escapeRegex = function(text) {
      return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    };
    this.init = function() {
      this.year = this.findSequence("yyyy");
      this.month = this.findSequence("MMMM") || this.findSequence("MMM") || this.findSequence("MM") || this.findSequence("M");
      this.day = this.findSequence("dd") || this.findSequence("d");
      this.hours = this.findSequence("HH") || this.findSequence("H");
      this.minutes = this.findSequence("mm") || this.findSequence("m");
      this.seconds = this.findSequence("ss") || this.findSequence("s");
      this.ampm = this.findSequence("tt");
      this.hours12 = this.findSequence("hh") || this.findSequence("h");
    };
    this.findSequence = function(seq) {
      function defaultTransform(value) {
        return parseInt(value);
      }
      var index = pattern.indexOf(seq);
      if (index === -1) {
        return null;
      }
      return {
        "findValue": function(input) {
          var prepared = escapeRegex(pattern);
          var transform = null;
          for (var i = 0; i < all.length; i++) {
            var len = all[i].length;
            var pick = seq === all[i].seq;
            var expr = all[i].expr;
            if (pick) {
              expr = "(" + expr + ")";
              transform = all[i].transform;
            }
            prepared = prepared.replace(all[i].seq, expr);
          }
          prepared = "^" + prepared + "$";
          try {
            var r = new RegExp(prepared);
            var array = r.exec(input);
            if (!array) {
              return null;
            }
            transform = transform || defaultTransform;
            return transform(array[1]);
          } catch (e) {
            throw "unable to create regex from: " + prepared;
          }
        }
      };
    };
    this.print = function(date) {
      var find = function(t) {
        for (var i2 = 0; i2 < all.length; i2++) {
          if (all[i2] && all[i2].seq === t) {
            return all[i2];
          }
        }
        return null;
      };
      var eos = pattern.length <= 0;
      var pos = 0;
      var components = [];
      while (!eos) {
        var rem = pattern.substring(pos);
        var matches = /%?(.)\1*/.exec(rem);
        if (matches && matches.length > 0) {
          var match = matches[0];
          var q = find(match);
          if (q) {
            components.push(q);
          } else {
            components.push(match);
          }
          pos += match.length;
          eos = pattern.length <= pos;
        } else {
          eos = true;
        }
      }
      for (var i = 0; i < components.length; i++) {
        var c = components[i];
        if (typeof c !== "string") {
          components[i] = c.str(date);
        }
      }
      return components.join("");
    };
    this.parse = function(input) {
      var year = this.year.findValue(input);
      if (!year) {
        return null;
      }
      var month = this.month.findValue(input);
      if (isNullOrUndefined(month)) {
        return null;
      }
      if (month > 12 || month < 1) {
        return null;
      }
      var day = this.day.findValue(input);
      var daysInMonth = DayPilot.Date.fromYearMonthDay(year, month).daysInMonth();
      if (day < 1 || day > daysInMonth) {
        return null;
      }
      var hours = this.hours ? this.hours.findValue(input) : 0;
      var minutes = this.minutes ? this.minutes.findValue(input) : 0;
      var seconds = this.seconds ? this.seconds.findValue(input) : 0;
      var ampm = this.ampm ? this.ampm.findValue(input) : null;
      if (this.ampm && this.hours12) {
        var hours12 = this.hours12.findValue(input);
        if (hours12 < 1 || hours12 > 12) {
          return null;
        }
        if (ampm === "PM") {
          if (hours12 === 12) {
            hours = 12;
          } else {
            hours = hours12 + 12;
          }
        } else {
          if (hours12 === 12) {
            hours = 0;
          } else {
            hours = hours12;
          }
        }
      }
      if (hours < 0 || hours > 23) {
        return null;
      }
      if (minutes < 0 || minutes > 59) {
        return null;
      }
      if (seconds < 0 || seconds > 59) {
        return null;
      }
      var d = /* @__PURE__ */ new Date();
      d.setUTCFullYear(year, month - 1, day);
      d.setUTCHours(hours);
      d.setUTCMinutes(minutes);
      d.setUTCSeconds(seconds);
      d.setUTCMilliseconds(0);
      return new DayPilot.Date(d);
    };
    this.init();
  };
  function equalsIgnoreCase(str1, str2) {
    if (isNullOrUndefined(str1)) {
      return false;
    }
    if (isNullOrUndefined(str2)) {
      return false;
    }
    return str1.toLocaleLowerCase() === str2.toLocaleLowerCase();
  }
  function indexOf(array, object, equalsFunction) {
    if (!array || !array.length) {
      return -1;
    }
    for (var i = 0; i < array.length; i++) {
      if (equalsFunction) {
        if (equalsFunction(array[i], object)) {
          return i;
        }
      } else if (array[i] === object) {
        return i;
      }
    }
    return -1;
  }
  ;
  DayPilot.DateUtil = {};
  DayPilot.DateUtil.fromStringSortable = function(string, readLocal) {
    if (!string) {
      throw "Can't create DayPilot.Date from an empty string";
    }
    var len = string.length;
    var date = len === 10;
    var datetime = len === 19;
    var long = len > 19;
    if (!date && !datetime && !long) {
      throw "Invalid string format (use '2010-01-01' or '2010-01-01T00:00:00'): " + string;
    }
    if (DayPilot.Date.Cache.Parsing[string] && !readLocal) {
      return DayPilot.Date.Cache.Parsing[string];
    }
    var year = string.substring(0, 4);
    var month = string.substring(5, 7);
    var day = string.substring(8, 10);
    var d = /* @__PURE__ */ new Date(0);
    d.setUTCFullYear(year, month - 1, day);
    if (date) {
      DayPilot.Date.Cache.Parsing[string] = d;
      return d;
    }
    var hours = string.substring(11, 13);
    var minutes = string.substring(14, 16);
    var seconds = string.substring(17, 19);
    d.setUTCHours(hours);
    d.setUTCMinutes(minutes);
    d.setUTCSeconds(seconds);
    if (datetime) {
      DayPilot.Date.Cache.Parsing[string] = d;
      return d;
    }
    var tzdir = string[19];
    var tzoffset = 0;
    if (tzdir === ".") {
      var ms = parseInt(string.substring(20, 23));
      d.setUTCMilliseconds(ms);
      tzoffset = DayPilot.DateUtil.getTzOffsetMinutes(string.substring(23));
    } else {
      tzoffset = DayPilot.DateUtil.getTzOffsetMinutes(string.substring(19));
    }
    var dd = new DayPilot.Date(d);
    if (!readLocal) {
      dd = dd.addMinutes(-tzoffset);
    }
    d = dd.toDate();
    DayPilot.Date.Cache.Parsing[string] = d;
    return d;
  };
  DayPilot.DateUtil.getTzOffsetMinutes = function(string) {
    if (isNullOrUndefined(string) || string === "") {
      return 0;
    }
    if (string === "Z") {
      return 0;
    }
    var tzdir = string[0];
    var tzhours = parseInt(string.substring(1, 3));
    var tzminutes = parseInt(string.substring(4));
    var tzoffset = tzhours * 60 + tzminutes;
    if (tzdir === "-") {
      return -tzoffset;
    } else if (tzdir === "+") {
      return tzoffset;
    } else {
      throw "Invalid timezone spec: " + string;
    }
  };
  DayPilot.DateUtil.hasTzSpec = function(string) {
    if (string.indexOf("+")) {
      return true;
    }
    if (string.indexOf("-")) {
      return true;
    }
    return false;
  };
  DayPilot.DateUtil.daysDiff = function(first, second) {
    first && second || function() {
      throw "two parameters required";
    }();
    first = new DayPilot.Date(first);
    second = new DayPilot.Date(second);
    if (first.getTime() > second.getTime()) {
      return null;
    }
    var i = 0;
    var fDay = first.getDatePart();
    var sDay = second.getDatePart();
    while (fDay < sDay) {
      fDay = fDay.addDays(1);
      i++;
    }
    return i;
  };
  DayPilot.DateUtil.daysSpan = function(first, second) {
    first && second || function() {
      throw "two parameters required";
    }();
    first = new DayPilot.Date(first);
    second = new DayPilot.Date(second);
    if (first === second) {
      return 0;
    }
    var diff = DayPilot.DateUtil.daysDiff(first, second);
    if (second == second.getDatePart()) {
      diff--;
    }
    return diff;
  };
  DayPilot.DateUtil.diff = function(first, second) {
    if (!(first && second && first.getTime && second.getTime)) {
      throw "Both compared objects must be Date objects (DayPilot.Date.diff).";
    }
    return first.getTime() - second.getTime();
  };
  DayPilot.DateUtil.fromLocal = function(localDate) {
    if (!localDate) {
      localDate = /* @__PURE__ */ new Date();
    }
    var d = /* @__PURE__ */ new Date();
    d.setUTCFullYear(localDate.getFullYear(), localDate.getMonth(), localDate.getDate());
    d.setUTCHours(localDate.getHours());
    d.setUTCMinutes(localDate.getMinutes());
    d.setUTCSeconds(localDate.getSeconds());
    d.setUTCMilliseconds(localDate.getMilliseconds());
    return d;
  };
  DayPilot.DateUtil.localToday = function() {
    var d = /* @__PURE__ */ new Date();
    d.setHours(0);
    d.setMinutes(0);
    d.setSeconds(0);
    d.setMilliseconds(0);
    return d;
  };
  DayPilot.DateUtil.hours = function(date, use12) {
    var minute = date.getUTCMinutes();
    if (minute < 10)
      minute = "0" + minute;
    var hour = date.getUTCHours();
    if (use12) {
      var am = hour < 12;
      var hour = hour % 12;
      if (hour === 0) {
        hour = 12;
      }
      var suffix = am ? "AM" : "PM";
      return hour + ":" + minute + " " + suffix;
    } else {
      return hour + ":" + minute;
    }
  };
  DayPilot.DateUtil.max = function(first, second) {
    if (first.getTime() > second.getTime()) {
      return first;
    } else {
      return second;
    }
  };
  DayPilot.DateUtil.min = function(first, second) {
    if (first.getTime() < second.getTime()) {
      return first;
    } else {
      return second;
    }
  };
})(local3);
var DayPilotDate = local3.Date;
var DateUtil = local3.DateUtil;

// node_modules/@daypilot/modal/src/navigator.js
var local4 = {
  Date: DayPilotDate,
  DateUtil,
  Locale
};
(function(DayPilot) {
  DayPilot.Navigator = function(id) {
    this.v = "${v}";
    var calendar = this;
    this.id = id;
    this.api = 2;
    this.isNavigator = true;
    this.angularAutoApply = true;
    this.weekStarts = "Auto";
    this.selectMode = "day";
    this.titleHeight = 30;
    this.dayHeaderHeight = 30;
    this.cellWidth = 30;
    this.cellHeight = 30;
    this._cssOnly = true;
    this.selectionStart = null;
    this.selectionEnd = null;
    this.selectionDay = new DayPilot.Date().getDatePart();
    this.showMonths = 1;
    this.skipMonths = 1;
    this.command = "navigate";
    this.year = new DayPilot.Date().getYear();
    this.month = new DayPilot.Date().getMonth() + 1;
    this.locale = "en-us";
    this.theme = "navigator_default";
    this.timeRangeSelectedHandling = "Bind";
    this.onTimeRangeSelect = null;
    this.onTimeRangeSelected = null;
    this.nav = {};
    this._prepare = function() {
      this.root.dp = this;
      if (this._cssOnly) {
        this.root.className = this._prefixCssClass("_main");
      } else {
        this.root.className = this._prefixCssClass("main");
      }
      this.root.style.width = this.cellWidth * 7 + "px";
      this.root.style.position = "relative";
      var vsph = document.createElement("input");
      vsph.type = "hidden";
      vsph.name = calendar.id + "_state";
      vsph.id = vsph.name;
      this.root.appendChild(vsph);
      this.state = vsph;
      if (!this.startDate) {
        this.startDate = new DayPilot.Date(DayPilot.Date.fromYearMonthDay(this.year, this.month));
      } else {
        this.startDate = new DayPilot.Date(this.startDate).firstDayOfMonth();
      }
      this.calendars = [];
      this.selected = [];
      this.months = [];
    };
    this._api2 = function() {
      return calendar.api === 2;
    };
    this._clearTable = function() {
      this.root.innerHTML = "";
    };
    this._prefixCssClass = function(part) {
      var prefix = this.theme || this.cssClassPrefix;
      if (prefix) {
        return prefix + part;
      } else {
        return "";
      }
    };
    this._addClass = function(object, name) {
      var fullName = this._cssOnly ? this._prefixCssClass("_" + name) : this._prefixCssClass(name);
      addClass(object, fullName);
    };
    this._removeClass = function(object, name) {
      var fullName = this._cssOnly ? this._prefixCssClass("_" + name) : this._prefixCssClass(name);
      removeClass(object, fullName);
    };
    this._drawTable = function(j, showLinks) {
      var month = {};
      month.cells = [];
      month.days = [];
      month.weeks = [];
      var startDate = this.startDate.addMonths(j);
      var showBefore = showLinks.before;
      var showAfter = showLinks.after;
      var firstOfMonth = startDate.firstDayOfMonth();
      var first = firstOfMonth.firstDayOfWeek(resolved.weekStarts());
      var last = firstOfMonth.addMonths(1);
      var days = DayPilot.DateUtil.daysDiff(first, last);
      var rowCount = 6;
      month._rowCount = rowCount;
      var today = new DayPilot.Date().getDatePart();
      var width = this.cellWidth * 7;
      var height = this.cellHeight * rowCount + this.titleHeight + this.dayHeaderHeight;
      month.height = height;
      var main = document.createElement("div");
      main.style.width = width + "px";
      main.style.height = height + "px";
      main.style.position = "relative";
      if (this._cssOnly) {
        main.className = this._prefixCssClass("_month");
      } else {
        main.className = this._prefixCssClass("month");
      }
      main.style.cursor = "default";
      main.style.MozUserSelect = "none";
      main.style.KhtmlUserSelect = "none";
      main.style.WebkitUserSelect = "none";
      main.month = month;
      this.root.appendChild(main);
      var totalHeaderHeight = this.titleHeight + this.dayHeaderHeight;
      var tl = document.createElement("div");
      tl.style.position = "absolute";
      tl.style.left = "0px";
      tl.style.top = "0px";
      tl.style.width = this.cellWidth + "px";
      tl.style.height = this.titleHeight + "px";
      tl.style.lineHeight = this.titleHeight + "px";
      tl.setAttribute("unselectable", "on");
      if (this._cssOnly) {
        tl.className = this._prefixCssClass("_titleleft");
      } else {
        tl.className = this._prefixCssClass("titleleft");
      }
      if (showLinks.left) {
        tl.style.cursor = "pointer";
        tl.innerHTML = "<span>&lt;</span>";
        tl.onclick = this._clickLeft;
      }
      main.appendChild(tl);
      this.tl = tl;
      var ti = document.createElement("div");
      ti.style.position = "absolute";
      ti.style.left = this.cellWidth + "px";
      ti.style.top = "0px";
      ti.style.width = this.cellWidth * 5 + "px";
      ti.style.height = this.titleHeight + "px";
      ti.style.lineHeight = this.titleHeight + "px";
      ti.style.textAlign = "center";
      ti.setAttribute("unselectable", "on");
      if (this._cssOnly) {
        ti.className = this._prefixCssClass("_title");
      } else {
        ti.className = this._prefixCssClass("title");
      }
      ti.innerHTML = resolved.locale().monthNames[startDate.getMonth()] + " " + startDate.getYear();
      main.appendChild(ti);
      this.ti = ti;
      var tr = document.createElement("div");
      tr.style.position = "absolute";
      tr.style.left = this.cellWidth * 6 + "px";
      tr.style.top = "0px";
      tr.style.width = this.cellWidth + "px";
      tr.style.height = this.titleHeight + "px";
      tr.style.lineHeight = this.titleHeight + "px";
      tr.setAttribute("unselectable", "on");
      if (this._cssOnly) {
        tr.className = this._prefixCssClass("_titleright");
      } else {
        tr.className = this._prefixCssClass("titleright");
      }
      if (showLinks.right) {
        tr.style.cursor = "pointer";
        tr.innerHTML = "<span>&gt;</span>";
        tr.onclick = this._clickRight;
      }
      main.appendChild(tr);
      this.tr = tr;
      for (var x = 0; x < 7; x++) {
        month.cells[x] = [];
        var dh = document.createElement("div");
        dh.style.position = "absolute";
        dh.style.left = x * this.cellWidth + "px";
        dh.style.top = this.titleHeight + "px";
        dh.style.width = this.cellWidth + "px";
        dh.style.height = this.dayHeaderHeight + "px";
        dh.style.lineHeight = this.dayHeaderHeight + "px";
        dh.setAttribute("unselectable", "on");
        if (this._cssOnly) {
          dh.className = this._prefixCssClass("_dayheader");
        } else {
          dh.className = this._prefixCssClass("dayheader");
        }
        dh.innerHTML = "<span>" + this._getDayName(x) + "</span>";
        main.appendChild(dh);
        month.days.push(dh);
        for (var y = 0; y < rowCount; y++) {
          var day = first.addDays(y * 7 + x);
          var isSelected = this._isSelected(day) && this._selectModeLowerCase() !== "none";
          var isCurrentMonth = day.getMonth() === startDate.getMonth();
          var isPrevMonth = day.getTime() < startDate.getTime();
          var isNextMonth = day.getTime() > startDate.getTime();
          var dayClass;
          var dc = document.createElement("div");
          month.cells[x][y] = dc;
          dc.day = day;
          dc.x = x;
          dc.y = y;
          dc.isCurrentMonth = isCurrentMonth;
          if (this._cssOnly) {
            dc.className = this._prefixCssClass(isCurrentMonth ? "_day" : "_dayother");
          } else {
            dc.className = this._prefixCssClass(isCurrentMonth ? "day" : "dayother");
          }
          calendar._addClass(dc, "cell");
          if (day.getTime() === today.getTime() && isCurrentMonth) {
            this._addClass(dc, "today");
          }
          if (day.dayOfWeek() === 0 || day.dayOfWeek() === 6) {
            this._addClass(dc, "weekend");
          }
          dc.style.position = "absolute";
          dc.style.left = x * this.cellWidth + "px";
          dc.style.top = y * this.cellHeight + totalHeaderHeight + "px";
          dc.style.width = this.cellWidth + "px";
          dc.style.height = this.cellHeight + "px";
          dc.style.lineHeight = this.cellHeight + "px";
          var inner = document.createElement("div");
          inner.style.position = "absolute";
          if (this._cssOnly) {
            inner.className = day.getTime() === today.getTime() && isCurrentMonth ? this._prefixCssClass("_todaybox") : this._prefixCssClass("_daybox");
          } else {
            inner.className = day.getTime() === today.getTime() && isCurrentMonth ? this._prefixCssClass("todaybox") : this._prefixCssClass("daybox");
          }
          calendar._addClass(inner, "cell_box");
          inner.style.left = "0px";
          inner.style.top = "0px";
          inner.style.right = "0px";
          inner.style.bottom = "0px";
          dc.appendChild(inner);
          var cell = null;
          if (this.cells && this.cells[day.toStringSortable()]) {
            cell = this.cells[day.toStringSortable()];
            if (cell.css) {
              this._addClass(dc, cell.css);
            }
          }
          if (isCurrentMonth || showBefore && isPrevMonth || showAfter && isNextMonth) {
            var text = document.createElement("div");
            text.innerHTML = day.getDay();
            text.style.position = "absolute";
            text.style.left = "0px";
            text.style.top = "0px";
            text.style.right = "0px";
            text.style.bottom = "0px";
            calendar._addClass(text, "cell_text");
            dc.style.cursor = "pointer";
            dc.isClickable = true;
            if (cell && cell.html) {
              text.innerHTML = cell.html;
            }
            dc.appendChild(text);
          }
          dc.setAttribute("unselectable", "on");
          dc.onclick = this._cellClick;
          dc.onmousedown = this._cellMouseDown;
          dc.onmousemove = this._cellMouseMove;
          if (isSelected) {
            calendar._cellSelect(main, x, y);
            this.selected.push(dc);
          }
          main.appendChild(dc);
        }
      }
      var line = document.createElement("div");
      line.style.position = "absolute";
      line.style.left = "0px";
      line.style.top = totalHeaderHeight - 2 + "px";
      line.style.width = this.cellWidth * 7 + "px";
      line.style.height = "1px";
      line.style.fontSize = "1px";
      line.style.lineHeight = "1px";
      if (this._cssOnly) {
        line.className = this._prefixCssClass("_line");
      } else {
        line.className = this._prefixCssClass("line");
      }
      main.appendChild(line);
      this.months.push(month);
    };
    this._cellSelect = function(main, x, y) {
      var div = main.month.cells[x][y];
      calendar._addClass(div, "select");
    };
    this._selectModeLowerCase = function() {
      var selectMode = this.selectMode || "";
      return selectMode.toLowerCase();
    };
    this._adjustSelection = function() {
      var selectMode = calendar._selectModeLowerCase();
      switch (selectMode) {
        case "day":
          this.selectionStart = this.selectionDay;
          this.selectionEnd = this.selectionStart;
          break;
        case "week":
          this.selectionStart = this.selectionDay.firstDayOfWeek(resolved.weekStarts());
          this.selectionEnd = this.selectionStart.addDays(6);
          break;
        case "month":
          this.selectionStart = this.selectionDay.firstDayOfMonth();
          this.selectionEnd = this.selectionDay.lastDayOfMonth();
          break;
        case "none":
          this.selectionStart = this.selectionDay;
          this.selectionEnd = this.selectionStart;
          break;
        default:
          throw "Unknown selectMode value.";
      }
    };
    this.select = function(date, options) {
      var focus = true;
      var notify = true;
      if (typeof options === "object") {
        if (options.dontFocus) {
          focus = false;
        }
        if (options.dontNotify) {
          notify = false;
        }
      } else if (typeof options === "boolean") {
        focus = !options;
      }
      var originalStart = this.selectionStart;
      var originalEnd = this.selectionEnd;
      this.selectionStart = new DayPilot.Date(date).getDatePart();
      this.selectionDay = this.selectionStart;
      var startChanged = false;
      if (focus) {
        var newStart = this.startDate;
        if (this.selectionStart.getTime() < this.visibleStart().getTime() || this.selectionStart.getTime() > this.visibleEnd().getTime()) {
          newStart = this.selectionStart.firstDayOfMonth();
        }
        if (newStart.toStringSortable() !== this.startDate.toStringSortable()) {
          startChanged = true;
        }
        this.startDate = newStart;
      }
      this._adjustSelection();
      this._clearTable();
      this._prepare();
      this._drawMonths();
      if (notify && (!originalStart.equals(this.selectionStart) || !originalEnd.equals(this.selectionEnd))) {
        this._timeRangeSelectedDispatch();
      }
    };
    this.update = function() {
      this._resetCssOnly();
      this._adjustSelection();
      this._clearTable();
      this._prepare();
      this._drawMonths();
    };
    this._getDayName = function(i) {
      var x = i + resolved.weekStarts();
      if (x > 6) {
        x -= 7;
      }
      return resolved.locale().dayNamesShort[x];
    };
    this._isSelected = function(date) {
      if (this.selectionStart === null || this.selectionEnd === null) {
        return false;
      }
      if (this.selectionStart.getTime() <= date.getTime() && date.getTime() <= this.selectionEnd.getTime()) {
        return true;
      }
      return false;
    };
    this._cellMouseDown = function(ev) {
    };
    this._cellMouseMove = function(ev) {
    };
    this._cellClick = function(ev) {
      var month = this.parentNode.month;
      var x = this.x;
      var y = this.y;
      var day = month.cells[x][y].day;
      if (!month.cells[x][y].isClickable) {
        return;
      }
      calendar.clearSelection();
      calendar.selectionDay = day;
      var day = calendar.selectionDay;
      switch (calendar._selectModeLowerCase()) {
        case "none":
          calendar.selectionStart = day;
          calendar.selectionEnd = day;
          break;
        case "day":
          var s = month.cells[x][y];
          calendar._addClass(s, "select");
          calendar.selected.push(s);
          calendar.selectionStart = s.day;
          calendar.selectionEnd = s.day;
          break;
        case "week":
          for (var j = 0; j < 7; j++) {
            calendar._addClass(month.cells[j][y], "select");
            calendar.selected.push(month.cells[j][y]);
          }
          calendar.selectionStart = month.cells[0][y].day;
          calendar.selectionEnd = month.cells[6][y].day;
          break;
        case "month":
          var start = null;
          var end = null;
          for (var y = 0; y < 6; y++) {
            for (var x = 0; x < 7; x++) {
              var s = month.cells[x][y];
              if (!s) {
                continue;
              }
              if (s.day.getYear() === day.getYear() && s.day.getMonth() === day.getMonth()) {
                calendar._addClass(s, "select");
                calendar.selected.push(s);
                if (start === null) {
                  start = s.day;
                }
                end = s.day;
              }
            }
          }
          calendar.selectionStart = start;
          calendar.selectionEnd = end;
          break;
        default:
          throw "unknown selectMode";
      }
      calendar._timeRangeSelectedDispatch();
    };
    this._timeRangeSelectedDispatch = function() {
      var start = calendar.selectionStart;
      var end = calendar.selectionEnd.addDays(1);
      var days = DayPilot.DateUtil.daysDiff(start, end);
      var day = calendar.selectionDay;
      if (calendar._api2()) {
        var args = {};
        args.start = start;
        args.end = end;
        args.day = day;
        args.days = days;
        args.preventDefault = function() {
          this.preventDefault.value = true;
        };
        if (typeof calendar.onTimeRangeSelect === "function") {
          calendar._angular.apply(function() {
            calendar.onTimeRangeSelect(args);
          });
          if (args.preventDefault.value) {
            return;
          }
        }
        if (typeof calendar.onTimeRangeSelected === "function") {
          calendar._angular.apply(function() {
            calendar.onTimeRangeSelected(args);
          });
        }
      }
    };
    this._clickRight = function(ev) {
      calendar._moveMonth(calendar.skipMonths);
    };
    this._clickLeft = function(ev) {
      calendar._moveMonth(-calendar.skipMonths);
    };
    this._moveMonth = function(i) {
      this.startDate = this.startDate.addMonths(i);
      this._clearTable();
      this._prepare();
      this._drawMonths();
    };
    this.visibleStart = function() {
      return calendar.startDate.firstDayOfMonth().firstDayOfWeek(resolved.weekStarts());
    };
    this.visibleEnd = function() {
      return calendar.startDate.firstDayOfMonth().addMonths(this.showMonths - 1).firstDayOfWeek(resolved.weekStarts()).addDays(42);
    };
    this._drawMonths = function() {
      for (var j = 0; j < this.showMonths; j++) {
        var showLinks = this._getShowLinks(j);
        this._drawTable(j, showLinks);
      }
      this.root.style.height = this._getHeight() + "px";
    };
    this._getHeight = function() {
      var total = 0;
      for (var i = 0; i < this.months.length; i++) {
        var month = this.months[i];
        total += month.height;
      }
      return total;
    };
    this._getShowLinks = function(j) {
      if (this.internal.showLinks) {
        return this.internal.showLinks;
      }
      var showLinks = {};
      showLinks.left = j === 0;
      showLinks.right = j === 0;
      showLinks.before = j === 0;
      showLinks.after = j === this.showMonths - 1;
      return showLinks;
    };
    this.internal = {};
    this._resolved = {};
    var resolved = this._resolved;
    resolved.locale = function() {
      return DayPilot.Locale.find(calendar.locale);
    };
    resolved.weekStarts = function() {
      if (calendar.weekStarts === "Auto") {
        var locale = resolved.locale();
        if (locale) {
          return locale.weekStarts;
        } else {
          return 0;
        }
      } else {
        return calendar.weekStarts;
      }
    };
    this.clearSelection = function() {
      for (var j = 0; j < this.selected.length; j++) {
        this._removeClass(this.selected[j], "select");
      }
      this.selected = [];
    };
    this._angular = {};
    this._angular.scope = null;
    this._angular.notify = function() {
      if (calendar._angular.scope) {
        calendar._angular.scope["$apply"]();
      }
    };
    this._angular.apply = function(f) {
      if (calendar.angularAutoApply && calendar._angular.scope) {
        calendar._angular.scope["$apply"](f);
      } else {
        f();
      }
    };
    this._resetCssOnly = function() {
      if (!calendar._cssOnly) {
        calendar._cssOnly = true;
        window.console && window.console.log && window.console.log("DayPilot: cssOnly = false mode is not supported anymore.");
      }
    };
    this._loadTop = function() {
      if (this.id && this.id.tagName) {
        this.nav.top = this.id;
      } else if (typeof this.id === "string") {
        this.nav.top = document.getElementById(this.id);
        if (!this.nav.top) {
          throw "DayPilot.Navigator: The placeholder element not found: '" + id + "'.";
        }
      } else {
        throw "DayPilot.Navigator() constructor requires the target element or its ID as a parameter";
      }
      this.root = this.nav.top;
    };
    this.init = function() {
      this._loadTop();
      this._resetCssOnly();
      if (this.root.dp) {
        return;
      }
      this._adjustSelection();
      this._prepare();
      this._drawMonths();
      this._registerDispose();
      this.initialized = true;
    };
    this.dispose = function() {
      var c = calendar;
      if (!c.root) {
        return;
      }
      c.root.removeAttribute("style");
      c.root.removeAttribute("class");
      c.root.dp = null;
      c.root.innerHTML = null;
      c.root = null;
    };
    this._registerDispose = function() {
      this.root.dispose = this.dispose;
    };
    this.Init = this.init;
  };
  function addClass(object, name) {
    if (!name) {
      return;
    }
    if (!object) {
      return;
    }
    if (isArray(object)) {
      for (var i = 0; i < object.length; i++) {
        addClass(object[i], name);
      }
      return;
    }
    if (!object.className) {
      object.className = name;
      return;
    }
    var already = new RegExp("(^|\\s)" + name + "($|\\s)");
    if (!already.test(object.className)) {
      object.className = object.className + " " + name;
    }
  }
  function removeClass(object, name) {
    if (!object) {
      return;
    }
    if (isArray(object)) {
      for (var i = 0; i < object.length; i++) {
        removeClass(object[i], name);
      }
      return;
    }
    if (!object.className) {
      return;
    }
    var already = new RegExp("(^|\\s)" + name + "($|\\s)");
    object.className = object.className.replace(already, " ").replace(/^\s\s*/, "").replace(/\s\s*$/, "");
  }
  function isArray(o) {
    return Object.prototype.toString.call(o) === "[object Array]";
  }
})(local4);
var { Navigator } = local4;

// node_modules/@daypilot/modal/src/datepicker.js
var local5 = {
  Date: DayPilotDate,
  Navigator,
  Locale
};
(function(DayPilot) {
  "use strict";
  if (typeof DayPilot.DatePicker !== "undefined") {
    return;
  }
  DayPilot.DatePicker = function(properties) {
    this.v = "${v}";
    var navigatorId = "navigator_" + new DayPilotDate().getTime();
    var This = this;
    this.onShow = null;
    this.onTimeRangeSelect = null;
    this.onTimeRangeSelected = null;
    this.prepare = function() {
      this.locale = "en-us";
      this.target = null;
      this.targetAlignment = "left";
      this.resetTarget = true;
      this.pattern = this._resolved.locale().datePattern;
      this.theme = "navigator_default";
      this.patterns = [];
      this.zIndex = null;
      if (properties) {
        for (var name in properties) {
          this[name] = properties[name];
        }
      }
      this.init();
    };
    this.init = function() {
      this.date = new DayPilot.Date(this.date);
      var value = this._readFromTarget();
      if (this.resetTarget && !value) {
        this._writeToTarget(this.date);
      } else if (!this.resetTarget) {
        This.date = value;
      }
      var target = this._element();
      if (target) {
        target.addEventListener("input", function() {
          This.date = This._readFromTarget();
          if (This.date) {
            This.navigator.select(This.date, { dontNotify: true });
          }
        });
      }
      document.addEventListener("mousedown", function() {
        This.close();
      });
      return this;
    };
    this.close = function() {
      if (!this._visible) {
        return;
      }
      this._visible = false;
      if (this.navigator) {
        this.navigator.dispose();
      }
      this.div.innerHTML = "";
      if (this.div && this.div.parentNode === document.body) {
        document.body.removeChild(this.div);
      }
    };
    this.setDate = function(date) {
      this.date = new DayPilot.Date(date);
      this._writeToTarget(this.date);
    };
    this._readFromTarget = function() {
      var element = this._element();
      if (!element) {
        return this.date;
      }
      var value = null;
      if (element.tagName === "INPUT") {
        value = element.value;
      } else {
        value = element.innerText;
      }
      if (!value) {
        return null;
      }
      var date = DayPilot.Date.parse(value, This.pattern);
      for (var i = 0; i < This.patterns.length; i++) {
        if (date) {
          return date;
        }
        date = DayPilot.Date.parse(value, This.patterns[i]);
      }
      return date;
    };
    this._writeToTarget = function(date) {
      var element = this._element();
      if (!element) {
        return;
      }
      var value = date.toString(This.pattern, This.locale);
      if (element.tagName === "INPUT") {
        element.value = value;
      } else {
        element.innerHTML = value;
      }
    };
    this._resolved = {};
    this._resolved.locale = function() {
      return DayPilot.Locale.find(This.locale);
    };
    this._element = function() {
      var id = this.target;
      var element = id && id.nodeType && id.nodeType === 1 ? id : document.getElementById(id);
      return element;
    };
    Object.defineProperty(this, "visible", {
      get: function() {
        return This._visible;
      }
    });
    this.show = function() {
      if (this._visible) {
        return;
      }
      var element = this._element();
      var navigator2 = this.navigator;
      var navigator2 = new DayPilot.Navigator(navigatorId);
      navigator2.api = 2;
      navigator2.cssOnly = true;
      navigator2.theme = This.theme;
      navigator2.weekStarts = "Auto";
      navigator2.locale = This.locale;
      navigator2.onTimeRangeSelected = function(args) {
        This.date = args.start;
        var start = args.start.addTime(navigator2._pickerTimePart);
        var value = start.toString(This.pattern, This.locale);
        var args = {};
        args.start = start;
        args.date = start;
        args.preventDefault = function() {
          this.preventDefault.value = true;
        };
        if (typeof This.onTimeRangeSelect === "function") {
          This.onTimeRangeSelect(args);
          if (args.preventDefault.value) {
            return;
          }
        }
        This._writeToTarget(value);
        This.close();
        if (typeof This.onTimeRangeSelected === "function") {
          This.onTimeRangeSelected(args);
        }
      };
      this.navigator = navigator2;
      var position = abs(element);
      var height = element.offsetHeight;
      var align = This.targetAlignment;
      var div = document.createElement("div");
      div.style.position = "absolute";
      if (align === "left") {
        div.style.left = position.x + "px";
      }
      div.style.top = position.y + height + "px";
      if (This.zIndex) {
        div.style.zIndex = This.zIndex;
      }
      var nav = document.createElement("div");
      nav.id = navigatorId;
      div.appendChild(nav);
      div.addEventListener("mousedown", function(ev) {
        var ev = ev || window.event;
        ev.cancelBubble = true;
        ev.stopPropagation && ev.stopPropagation();
      });
      document.body.appendChild(div);
      this.div = div;
      var selected = This._readFromTarget() || new DayPilot.Date().getDatePart();
      navigator2.startDate = selected;
      navigator2._pickerTimePart = selected.getTimePart();
      navigator2.selectionDay = selected.getDatePart();
      navigator2.init();
      if (align === "right") {
        var left = position.x + element.offsetWidth - navigator2.nav.top.offsetWidth;
        div.style.left = left + "px";
      }
      this._visible = true;
      if (this.onShow) {
        this.onShow();
      }
    };
    this.prepare();
  };
  function abs(element, visible) {
    if (!element) {
      return null;
    }
    if (!document.body.contains(element)) {
      return null;
    }
    if (element.getBoundingClientRect) {
      var r = absBoundingClientBased(element);
      if (visible) {
        var full = absOffsetBased(element, false);
        var visible = absOffsetBased(element, true);
        r.x += visible.x - full.x;
        r.y += visible.y - full.y;
        r.w = visible.w;
        r.h = visible.h;
      }
      return r;
    } else {
      return absOffsetBased(element, visible);
    }
  }
  function absBoundingClientBased(element) {
    var elemRect = element.getBoundingClientRect();
    return {
      x: elemRect.left + window.pageXOffset,
      y: elemRect.top + window.pageYOffset,
      w: element.clientWidth,
      h: element.clientHeight,
      toString: function() {
        return "x:" + this.x + " y:" + this.y + " w:" + this.w + " h:" + this.h;
      }
    };
  }
  function absOffsetBased(element, visible) {
    var r = {
      x: element.offsetLeft,
      y: element.offsetTop,
      w: element.clientWidth,
      h: element.clientHeight,
      toString: function() {
        return "x:" + this.x + " y:" + this.y + " w:" + this.w + " h:" + this.h;
      }
    };
    while (op(element)) {
      element = op(element);
      r.x -= element.scrollLeft;
      r.y -= element.scrollTop;
      if (visible) {
        if (r.x < 0) {
          r.w += r.x;
          r.x = 0;
        }
        if (r.y < 0) {
          r.h += r.y;
          r.y = 0;
        }
        if (element.scrollLeft > 0 && r.x + r.w > element.clientWidth) {
          r.w -= r.x + r.w - element.clientWidth;
        }
        if (element.scrollTop && r.y + r.h > element.clientHeight) {
          r.h -= r.y + r.h - element.clientHeight;
        }
      }
      r.x += element.offsetLeft;
      r.y += element.offsetTop;
    }
    var pageOffset2 = pageOffset2();
    r.x += pageOffset2.x;
    r.y += pageOffset2.y;
    return r;
  }
  function op(element) {
    try {
      return element.offsetParent;
    } catch (e) {
      return document.body;
    }
  }
  function pageOffset() {
    if (typeof window.pageXOffset !== "undefined") {
      return { x: window.pageXOffset, y: window.pageYOffset };
    }
    var d = doc();
    return { x: d.scrollLeft, y: d.scrollTop };
  }
  function doc() {
    var de = document.documentElement;
    return de && de.clientHeight ? de : document.body;
  }
})(local5);
var { DatePicker } = local5;

// node_modules/@daypilot/modal/src/table.js
var local6 = {};
(function(DayPilot) {
  "use strict";
  if (DayPilot.Table) {
    return;
  }
  var Table2 = function(options) {
    this.form = null;
    this.item = null;
    this.data = null;
    this.name = null;
    this.theme = "edit_table_default";
    this.onInput = null;
    this.nav = {};
    this._activeEdit = null;
    this._rows = [];
    options = options || {};
    for (var name in options) {
      this[name] = options[name];
    }
  };
  Table2.prototype.create = function() {
    var table = this;
    var div = document.createElement("div");
    div.className = this.theme + "_main";
    div.style.position = "relative";
    var hidden = document.createElement("input");
    hidden.type = "hidden";
    hidden.name = table.name;
    hidden.table = this;
    div.appendChild(hidden);
    var tableElement = document.createElement("div");
    tableElement.className = this.theme + "_table";
    var header = this._createHeader();
    tableElement.appendChild(header);
    var spacerRow = table._createRowState({});
    spacerRow.spacer = true;
    var spacer = this._renderRow(spacerRow);
    spacer.classList.add(table.theme + "_spacer");
    tableElement.appendChild(spacer);
    var body = document.createElement("div");
    body.className = table.theme + "_tbody";
    tableElement.appendChild(body);
    div.appendChild(tableElement);
    var after = document.createElement("div");
    div.appendChild(after);
    this.nav.body = body;
    this.nav.table = tableElement;
    this.nav.main = div;
    this.nav.after = after;
    var add = document.createElement("div");
    var plus = document.createElement("span");
    plus.className = this.theme + "_plus";
    plus.addEventListener("click", function(ev) {
      if (table.disabled) {
        return;
      }
      var generate = table.item.onNewRow;
      var value = {};
      if (typeof generate === "function") {
        var args = {};
        args.result = table.form.serialize();
        args.value = {};
        generate(args);
        value = args.value;
      }
      var row = table._createRowState(value);
      table._rows.push(row);
      table._render();
      table._doOnInput();
    });
    this.nav.plus = plus;
    add.appendChild(plus);
    div.appendChild(add);
    return div;
  };
  Table2.prototype._createHeader = function() {
    var table = this;
    var row = document.createElement("div");
    row.classList.add(this.theme + "_row");
    row.classList.add(this.theme + "_header");
    this.item.columns.forEach(function(item) {
      var cell = document.createElement("div");
      cell.classList.add(table.theme + "_cell");
      cell.innerText = item.name;
      row.appendChild(cell);
    });
    return row;
  };
  Table2.prototype._maxRowsReached = function() {
    var max = this.item.max || 0;
    if (max && this._rows.length >= max) {
      return true;
    }
    return false;
  };
  Table2.prototype.save = function() {
    var table = this;
    var data = [];
    table._rows.forEach(function(row) {
      var item = {};
      row.cells.forEach(function(cell) {
        item[cell.id] = cell.value;
      });
      data.push(item);
    });
    return data;
  };
  Table2.prototype.load = function(data) {
    var table = this;
    var isArray = Object.prototype.toString.call(data) === "[object Array]";
    if (!isArray) {
      throw new Error("Array expected");
    }
    this.data = data;
    this._createState();
    this._render();
  };
  Table2.prototype._updateCss = function() {
    if (this.disabled) {
      this.nav.main.classList.add(this.theme + "_disabled");
    } else {
      this.nav.main.classList.remove(this.theme + "_disabled");
    }
    var maxReached = this._maxRowsReached();
    if (maxReached) {
      this.nav.plus.classList.add(this.theme + "_plus_max");
    } else {
      this.nav.plus.classList.remove(this.theme + "_plus_max");
    }
  };
  Table2.prototype._createState = function() {
    var table = this;
    this._rows = [];
    this.data.forEach(function(dataRow) {
      var row = table._createRowState(dataRow);
      table._rows.push(row);
    });
  };
  Table2.prototype._removeRow = function(row) {
    var table = this;
    var index = table._rows.indexOf(row);
    table._rows.splice(index, 1);
  };
  Table2.prototype._createRowState = function(dataRow) {
    var table = this;
    var row = {};
    row.data = dataRow;
    row.cells = [];
    table.item.columns.forEach(function(formItem) {
      var id = formItem.id;
      var value = dataRow[id];
      var type = table._formItemType(formItem);
      if (typeof value === "undefined") {
        if (type === "text") {
          value = "";
        } else if (type === "number") {
          value = 0;
        } else if (type === "select") {
          var options = formItem.options;
          value = options && options[0].id;
        }
      }
      var cell = {};
      cell.id = id;
      cell.value = value;
      cell.type = type;
      cell.data = formItem;
      row.cells.push(cell);
    });
    return row;
  };
  Table2.prototype._formItemType = function(formItem) {
    var type = formItem.type;
    if (!type) {
      if (formItem.options) {
        type = "select";
      } else {
        type = "text";
      }
    }
    return type;
  };
  Table2.prototype._render = function() {
    var table = this;
    this.nav.body.innerHTML = "";
    this.nav.after.innerHTML = "";
    this._rows.forEach(function(row) {
      var el2 = table._renderRow(row);
      table.nav.body.appendChild(el2);
    });
    if (this._rows.length === 0) {
      var el = table._renderEmpty();
      table.nav.after.appendChild(el);
    }
    this._updateCss();
  };
  Table2.prototype._renderEmpty = function() {
    var div = document.createElement("div");
    div.className = this.theme + "_empty";
    return div;
  };
  Table2.prototype._renderRow = function(row) {
    var table = this;
    var el = document.createElement("div");
    el.className = table.theme + "_row";
    row.cells.forEach(function(cell2) {
      var cellEl = document.createElement("div");
      cellEl.className = table.theme + "_cell";
      var interactive = table._renderCell(cell2);
      if (row.spacer) {
        var wrap = document.createElement("div");
        wrap.style.height = "0px";
        wrap.style.overflow = "hidden";
        wrap.appendChild(interactive);
        cellEl.appendChild(wrap);
      } else {
        cellEl.appendChild(interactive);
      }
      el.appendChild(cellEl);
    });
    var cell = document.createElement("div");
    cell.classList.add(table.theme + "_cell");
    cell.classList.add(table.theme + "_rowaction");
    var span = document.createElement("span");
    span.className = this.theme + "_delete";
    span.addEventListener("click", function(ev) {
      if (table.disabled) {
        return;
      }
      table._removeRow(row);
      table._render();
      table._doOnInput();
    });
    if (!row.spacer) {
      cell.appendChild(span);
    }
    el.appendChild(cell);
    return el;
  };
  Table2.prototype._doOnInput = function() {
    var table = this;
    if (typeof table.onInput === "function") {
      var args = {};
      table.onInput(args);
    }
  };
  Table2.prototype._renderCell = function(cell) {
    var table = this;
    var type = cell.type;
    if (type === "text" || type === "number") {
      var input = document.createElement("input");
      input.type = type;
      if (table.disabled) {
        input.disabled = true;
      }
      if (cell.value) {
        input.value = cell.value;
      }
      input.addEventListener("keyup", function(ev) {
        if (type === "number") {
          cell.value = Number(this.value);
        } else {
          cell.value = this.value;
        }
        table._doOnInput();
      });
      return input;
    } else if (type === "select") {
      var select = document.createElement("select");
      if (table.disabled) {
        select.disabled = true;
      }
      cell.data.options.forEach(function(item) {
        var option = document.createElement("option");
        option.innerText = item.name;
        option.value = item.id;
        option._originalValue = item.id;
        select.appendChild(option);
        if (cell.value === item.id) {
          option.setAttribute("selected", true);
        }
      });
      select.addEventListener("change", function(ev) {
        var option = select.options[select.selectedIndex];
        if (option && typeof option._originalValue !== "undefined") {
          cell.value = option._originalValue;
        }
        table._doOnInput();
      });
      return select;
    }
    throw new Error("Unsupported item type: " + type);
  };
  Table2.prototype.focus = function() {
  };
  DayPilot.Table = Table2;
})(local6);
var { Table } = local6;

// node_modules/@daypilot/modal/src/form.js
var local7 = {
  Date: DayPilotDate,
  DatePicker,
  Searchable,
  Table,
  Locale
};
(function(DayPilot) {
  "use strict";
  if (DayPilot.Form) {
    return;
  }
  var Form2 = function(options) {
    this.form = [];
    this.data = {};
    this.theme = "form_default";
    this.zIndex = 99999;
    this.locale = "en-us";
    this.plugins = {};
    this.onKey = null;
    this._rows = [];
    this._newRows = null;
    this.canceling = false;
    this._validationTimeouts = [];
    this._views = [];
    this._div = null;
    options = options || {};
    for (var name in options) {
      this[name] = options[name];
    }
  };
  Form2.prototype.create = function() {
    this.load();
    this.render();
    return this._div;
  };
  Form2.prototype.render = function() {
    var form = this;
    this._div = document.createElement("div");
    this._rows.forEach(function(row) {
      form.createView(row);
    });
    this.applyState();
  };
  Form2.prototype.createView = function(row) {
    var theme = this.theme;
    var form = this;
    var div = document.createElement("div");
    div.className = theme + "_form_item " + theme + "_form_item_level" + row.level;
    if (!row.interactive && row.type === "title") {
      div.className += " " + theme + "_form_title";
    } else {
      div.className += " " + theme + "_form_item_" + row.type;
    }
    if (row.data.cssClass) {
      div.className += " " + row.data.cssClass;
    }
    if (!row.isValue) {
      var label = document.createElement("div");
      label.className = theme + "_form_item_label";
      label.innerText = row.text;
      div.appendChild(label);
    }
    var interactive = this.createInteractive(row);
    interactive.onInput = function(options) {
      options = options || {};
      form._validateInteractive(interactive, {
        "debounce": !options.immediate
      });
      if (typeof form.onChange === "function") {
        var args = {};
        args.result = form.serialize();
        form.onChange(args);
      }
    };
    interactive.onBlur = function() {
      if (!form.canceling) {
        form._validateInteractive(interactive);
      }
    };
    interactive.apply(row);
    interactive._div = div;
    interactive.row = row;
    if (interactive.element) {
      div.appendChild(interactive.element);
    }
    this._views.push(interactive);
    this._div.appendChild(div);
  };
  Form2.prototype.validate = function() {
    var form = this;
    var valid = true;
    this._views.forEach(function(interactive) {
      var iv = form._validateInteractive(interactive);
      valid = valid && iv;
    });
    return valid;
  };
  Form2.prototype._validateInteractive = function(interactive, options) {
    options = options || {};
    var debounce = options.debounce;
    var silent = options.silent;
    var row = interactive.row;
    var valid = true;
    var onValidate = typeof row.data.onValidate === "function" ? row.data.onValidate : null;
    var validate = typeof row.data.validate === "function" ? row.data.validate : null;
    var validateHandler = onValidate || validate;
    if (validateHandler) {
      var args = {};
      args.valid = true;
      args.value = interactive.save()[row.field];
      args.message = "Error";
      args.values = this.serialize();
      args.result = this.serialize();
      validateHandler(args);
      var cssClassInvalid = this.theme + "_form_item_invalid";
      var cssClassMessage = this.theme + "_form_item_invalid_message";
      if (args.valid) {
        clearTimeout(this._validationTimeouts[row.field]);
        if (interactive._errorMsg) {
          interactive._errorMsg.remove();
          interactive._errorMsg = null;
        }
        interactive._div.classList.remove(cssClassInvalid);
      } else {
        let showInvalid = function() {
          if (interactive._errorMsg) {
            interactive._errorMsg.remove();
            interactive._errorMsg = null;
          }
          interactive._div.classList.add(cssClassInvalid);
          var msg = document.createElement("div");
          msg.classList.add(cssClassMessage);
          msg.innerText = args.message;
          interactive._errorMsg = msg;
          interactive._div.appendChild(msg);
        };
        if (!silent) {
          if (debounce) {
            var debounceDelay = 1e3;
            clearTimeout(this._validationTimeouts[row.field]);
            this._validationTimeouts[row.field] = setTimeout(function() {
              showInvalid();
            }, debounceDelay);
          } else {
            showInvalid();
          }
        }
      }
      valid = args.valid;
    }
    return valid;
  };
  Form2.prototype.load = function() {
    var t = this;
    this.form.forEach(function(item) {
      t.processFormItem(item, 0);
    });
    var flat;
    try {
      var stringified = JSON.stringify(this.data);
      var rebuilt = JSON.parse(stringified);
      flat = flatten(rebuilt);
    } catch (e) {
      throw new Error("The 'data' object is not serializable (it may contain circular dependencies): " + e);
    }
    for (var name in flat) {
      this.setValue(name, flat[name]);
    }
  };
  Form2.prototype.setValue = function(name, value) {
    this._rows.forEach(function(row) {
      row.applyValue(name, value);
    });
  };
  Form2.prototype.updateDependentState = function() {
    var form = this;
    var enabled = [true];
    var source = this._newRows ? this._newRows : this._rows;
    source.forEach(function(row) {
      var updatedRow = form.updateState(row, {
        enabled: enabled[row.level] && !row.data.disabled
      });
      if (updatedRow.isValue) {
        enabled[updatedRow.level + 1] = updatedRow.enabled && updatedRow.checked;
      }
    });
  };
  Form2.prototype.processFormItem = function(item, level) {
    var form = this;
    var type = this.getFieldType(item);
    var rows = [];
    if (type === "radio") {
      if (item.name) {
        var row = new RowModel();
        row.field = item.id;
        row.data = item;
        row.level = level;
        row.type = "label";
        row.interactive = false;
        row.text = item.name;
        form._rows.push(row);
        rows.push(row);
      }
      item.options.forEach(function(option) {
        var row2 = new RowModel();
        row2.field = item.id;
        row2.data = option;
        row2.level = level;
        row2.type = type;
        row2.isValue = true;
        row2.text = option.name;
        row2.resolved = option.id;
        form._rows.push(row2);
        rows.push(row2);
        if (option.children) {
          option.children.forEach(function(child) {
            var childRows = form.processFormItem(child, level + 1);
            rows = rows.concat(childRows);
          });
        }
      });
    } else if (type === "title") {
      var row = new RowModel();
      row.field = item.id;
      row.data = item;
      row.level = level;
      row.type = type;
      row.interactive = false;
      row.text = item.name;
      form._rows.push(row);
      rows.push(row);
    } else if (type === "image") {
      var row = new RowModel();
      row.isValue = true;
      row.field = item.id;
      row.data = item;
      row.level = level;
      row.type = type;
      row.interactive = false;
      row.text = null;
      form._rows.push(row);
      rows.push(row);
    } else if (type === "html") {
      var row = new RowModel();
      row.isValue = true;
      row.field = item.id;
      row.data = item;
      row.level = level;
      row.type = type;
      row.interactive = false;
      row.text = null;
      form._rows.push(row);
      rows.push(row);
    } else if (type === "scrollable") {
      var row = new RowModel();
      row.isValue = true;
      row.field = item.id;
      row.data = item;
      row.level = level;
      row.type = type;
      row.interactive = false;
      row.text = null;
      form._rows.push(row);
      rows.push(row);
    } else {
      var row = new RowModel();
      row.field = item.id;
      row.data = item;
      row.level = level;
      row.type = type;
      row.text = item.name;
      row.children = [];
      form._rows.push(row);
      rows.push(row);
    }
    if (type === "checkbox") {
      row.isValue = true;
      row.resolved = true;
      if (item.children) {
        item.children.forEach(function(child) {
          var childRows = form.processFormItem(child, level + 1);
          rows = rows.concat(childRows);
        });
      }
    }
    return rows;
  };
  Form2.prototype.doOnKey = function(key) {
    if (typeof this.onKey === "function") {
      var args = {
        key
      };
      this.onKey(args);
    }
  };
  Form2.prototype.createInteractive = function(row) {
    var form = this;
    var views = {
      "label": function() {
        return new Interactive();
      },
      "title": function() {
        return new Interactive();
      },
      "image": function() {
        var interactive = new Interactive();
        var image = document.createElement("img");
        image.src = row.data.image;
        interactive.element = image;
        return interactive;
      },
      "html": function() {
        var interactive = new Interactive();
        var div = document.createElement("div");
        if (typeof row.data.text === "string") {
          div.innerText = row.data.text;
        } else if (typeof row.data.html === "string") {
          div.innerHTML = row.data.html;
        }
        interactive.element = div;
        return interactive;
      },
      "scrollable": function() {
        var interactive = new Interactive();
        var scroll = document.createElement("div");
        scroll.className = form.theme + "_form_item_scrollable_scroll";
        if (row.data.height) {
          scroll.style.height = row.data.height + "px";
        }
        var div = document.createElement("div");
        div.className = form.theme + "_form_item_scrollable_scroll_content";
        if (typeof row.data.text === "string") {
          div.innerText = row.data.text;
        } else if (typeof row.data.html === "string") {
          div.innerHTML = row.data.html;
        }
        scroll.appendChild(div);
        interactive.element = scroll;
        return interactive;
      },
      "text": function() {
        var interactive = new Interactive();
        interactive.apply = function(row2) {
          interactive.row = row2;
          var input2 = interactive.element;
          input2.value = row2.value;
          input2.disabled = !row2.enabled;
        };
        var input = document.createElement("input");
        input.name = row.field;
        input.type = "text";
        input.autocomplete = "off";
        input.onkeydown = function(e) {
          var letcontinue = false;
          switch (e.keyCode) {
            case 13:
              form.doOnKey("Enter");
              break;
            case 27:
              form.doOnKey("Escape");
              break;
            default:
              letcontinue = true;
              break;
          }
          if (!letcontinue) {
            e.preventDefault();
            e.stopPropagation();
          }
        };
        input.oninput = function(e) {
          interactive.onInput();
        };
        input.onblur = function(e) {
          interactive.onBlur();
        };
        interactive.element = input;
        interactive.canFocus = function() {
          return !interactive.element.disabled;
        };
        interactive.focus = function() {
          interactive.element.focus();
          interactive.element.setSelectionRange(0, interactive.element.value.length);
        };
        interactive.save = function() {
          var result = {};
          result[row.field] = input.value;
          return result;
        };
        return interactive;
      },
      "textarea": function() {
        var interactive = new Interactive();
        interactive.apply = function(row2) {
          interactive.row = row2;
          var input = interactive.element;
          input.value = row2.value;
          input.disabled = !row2.enabled;
        };
        var textarea = document.createElement("textarea");
        textarea.name = row.field;
        if (row.data.height) {
          textarea.style.height = row.data.height + "px";
        }
        textarea.onkeydown = function(e) {
          var letcontinue = false;
          switch (e.keyCode) {
            case 13:
              if (e.ctrlKey || e.metaKey) {
                form.doOnKey("Enter");
              }
              letcontinue = false;
              break;
            case 27:
              form.doOnKey("Escape");
              break;
            default:
              letcontinue = true;
              break;
          }
          if (!letcontinue) {
            e.stopPropagation();
          }
        };
        textarea.oninput = function(e) {
          interactive.onInput();
        };
        textarea.onblur = function(e) {
          interactive.onBlur();
        };
        interactive.element = textarea;
        interactive.canFocus = function() {
          return !interactive.element.disabled;
        };
        interactive.focus = function() {
          interactive.element.focus();
          interactive.element.setSelectionRange(0, 0);
        };
        interactive.save = function() {
          var result = {};
          result[row.field] = textarea.value;
          return result;
        };
        return interactive;
      },
      "date": function() {
        var interactive = new Interactive();
        interactive.apply = function(row2) {
          interactive.row = row2;
          var input2 = interactive.element;
          var picker2 = interactive.picker;
          if (row2.data.dateFormat) {
            picker2.pattern = row2.data.dateFormat;
          }
          var locale = row2.data.locale || form.locale;
          if (locale) {
            picker2.locale = locale;
          }
          input2.disabled = !row2.enabled;
          picker2.date = new DayPilot.Date(row2.value);
          var formatted = new DayPilot.Date(row2.value).toString(row2.data.dateFormat || picker2.pattern, picker2.locale);
          input2.value = formatted;
        };
        var input = document.createElement("input");
        input.name = row.field;
        var picker = new DayPilot.DatePicker({
          target: input,
          theme: "navigator_modal",
          zIndex: form.zIndex + 1,
          resetTarget: false,
          targetAlignment: "left",
          onTimeRangeSelect: function(args) {
            interactive.onInput({ "immediate": true });
          }
        });
        input.picker = picker;
        input.className = form.theme + "_input_date";
        input.type = "text";
        input.onkeydown = function(e) {
          var letcontinue = false;
          switch (e.keyCode) {
            case 13:
              if (picker.visible) {
                picker.close();
              } else {
                form.doOnKey("Enter");
              }
              break;
            case 27:
              if (picker.visible) {
                picker.close();
              } else {
                form.doOnKey("Escape");
              }
              break;
            case 9:
              picker.close();
              letcontinue = true;
              break;
            default:
              letcontinue = true;
              break;
          }
          if (!letcontinue) {
            e.preventDefault();
            e.stopPropagation();
          }
        };
        input.onfocus = function() {
          picker.show();
        };
        input.onclick = function() {
          picker.show();
        };
        input.oninput = function(e) {
          interactive.onInput();
        };
        input.onblur = function(e) {
          interactive.onBlur();
        };
        interactive.element = input;
        interactive.picker = picker;
        interactive.canFocus = function() {
          return !interactive.element.disabled;
        };
        interactive.focus = function() {
          interactive.element.focus();
        };
        interactive.save = function() {
          var value = picker.date ? picker.date.toString() : null;
          var result = {};
          result[row.field] = value;
          return result;
        };
        return interactive;
      },
      "time": function() {
        return form._createInteractiveTime(row);
      },
      "datetime": function() {
        return form._createInteractiveDateTime(row);
      },
      "select": function() {
        var interactive = new Interactive();
        interactive.apply = function(row2) {
          interactive.row = row2;
          var select2 = interactive.element;
          select2.value = row2.value;
          select2.disabled = !row2.enabled;
        };
        var select = document.createElement("select");
        select.name = row.field;
        var disableParents = row.data.disableParents || false;
        if (row.data.options && row.data.options.forEach) {
          row.data.options.forEach(function(item) {
            addOption(item, 0);
          });
        }
        function addOption(item, level) {
          var indent = "";
          for (var i = 0; i < level; i++) {
            indent += "&nbsp;&nbsp;";
          }
          var option = document.createElement("option");
          option.innerHTML = indent + escapeHtml(item.name || item.id);
          option.value = item.id;
          option._originalValue = item.id;
          select.appendChild(option);
          if (item.children) {
            if (disableParents) {
              option.disabled = true;
            }
            item.children.forEach(function(child) {
              addOption(child, level + 1);
            });
          }
        }
        function escapeHtml(html) {
          var div = document.createElement("div");
          div.innerText = html;
          return div.innerHTML;
        }
        select.onchange = function(e) {
          interactive.onInput({ "immediate": true });
        };
        select.onblur = function(e) {
          interactive.onBlur();
        };
        interactive.element = select;
        interactive.canFocus = function() {
          return !interactive.element.disabled;
        };
        interactive.focus = function() {
          interactive.element.focus();
        };
        interactive.save = function() {
          var value = null;
          var option = select.options[select.selectedIndex];
          if (option && typeof option._originalValue !== "undefined") {
            value = option._originalValue;
          }
          var result = {};
          result[row.field] = value;
          return result;
        };
        return interactive;
      },
      "searchable": function() {
        var interactive = new Interactive();
        interactive.apply = function(row2) {
          interactive.row = row2;
          var searchable2 = interactive.searchable;
          searchable2.disabled = !row2.enabled;
          searchable2.select(row2.value);
        };
        var searchable = new Searchable({
          data: row.data.options || [],
          name: row.field,
          theme: form.theme + "_form_item_searchable",
          listZIndex: form.zIndex + 1,
          // disabled: !row.enabled
          onSelect: function(args) {
            if (args.ui) {
              interactive.onInput({ "immediate": true });
            }
          }
        });
        var element = searchable.create();
        interactive.element = element;
        interactive.searchable = searchable;
        interactive.canFocus = function() {
          return !interactive.searchable.disabled;
        };
        interactive.focus = function() {
          interactive.searchable.focus();
        };
        interactive.save = function() {
          var value = searchable.selected && searchable.selected.id;
          var result = {};
          result[row.field] = value;
          return result;
        };
        return interactive;
      },
      "radio": function() {
        var interactive = new Interactive();
        interactive.apply = function(row2) {
          interactive.row = row2;
          var radio2 = interactive.radio;
          radio2.checked = row2.checked;
          radio2.disabled = !row2.enabled;
        };
        var label = document.createElement("label");
        var radio = document.createElement("input");
        radio.type = "radio";
        radio.name = row.field;
        radio._originalValue = row.resolved;
        radio.onchange = function(ev) {
          var row2 = interactive.row;
          form.findRowsByField(row2.field).forEach(function(row3) {
            form.updateState(row3, {
              checked: false
            });
          });
          form.updateState(row2, {
            checked: true
          });
          form.applyState();
          interactive.onInput({ "immediate": true });
        };
        radio.onblur = function(e) {
          interactive.onBlur();
        };
        label.appendChild(radio);
        var text = document.createTextNode(row.text);
        label.append(text);
        interactive.element = label;
        interactive.radio = radio;
        interactive.canFocus = function() {
          return false;
        };
        interactive.focus = function() {
          interactive.radio.focus();
        };
        interactive.save = function() {
          if (!radio.checked) {
            return {};
          }
          var value = radio._originalValue;
          var result = {};
          result[row.field] = value;
          return result;
        };
        return interactive;
      },
      "checkbox": function() {
        var interactive = new Interactive();
        interactive.apply = function(row2) {
          interactive.row = row2;
          var checkbox2 = interactive.checkbox;
          checkbox2.checked = row2.checked;
          checkbox2.disabled = !row2.enabled;
        };
        var label = document.createElement("label");
        var checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.name = row.field;
        checkbox._originalValue = row.resolved;
        checkbox.onchange = function(ev) {
          var row2 = interactive.row;
          form.updateState(row2, {
            checked: this.checked
          });
          form.applyState();
          interactive.onInput({ "immediate": true });
        };
        checkbox.onblur = function(e) {
          interactive.onBlur();
        };
        label.appendChild(checkbox);
        var text = document.createTextNode(row.text);
        label.append(text);
        interactive.element = label;
        interactive.checkbox = checkbox;
        interactive.canFocus = function() {
          return false;
        };
        interactive.focus = function() {
          interactive.checkbox.focus();
        };
        interactive.save = function() {
          var value = checkbox.checked;
          var result = {};
          result[row.field] = value;
          return result;
        };
        return interactive;
      },
      "table": function() {
        var interactive = new Interactive();
        interactive.apply = function(row2) {
          interactive.row = row2;
          var table2 = interactive.table;
          table2.disabled = !row2.enabled;
          table2.load(row2.value || []);
        };
        var table = new Table({
          name: row.field,
          // form: row.data.columns,
          form,
          theme: form.theme + "_form_item_tabular",
          item: row.data,
          onInput: function(args) {
            interactive.onInput();
          }
        });
        var element = table.create();
        interactive.element = element;
        interactive.table = table;
        interactive.canFocus = function() {
          return false;
        };
        interactive.focus = function() {
          interactive.table.focus();
        };
        interactive.save = function() {
          var value = table.save();
          var result = {};
          result[row.field] = value;
          return result;
        };
        return interactive;
      }
    };
    if (form.plugins && form.plugins[row.type]) {
      return form.plugins[row.type](row);
    }
    return views[row.type]();
  };
  Form2.prototype._createInteractiveTime = function(row) {
    var form = this;
    var interactive = new Interactive();
    interactive.apply = function(row2) {
      interactive.row = row2;
      var searchable2 = interactive.searchable;
      searchable2.disabled = !row2.enabled;
      searchable2.select(row2.value);
    };
    var data = [];
    var interval = row.data.timeInterval || 15;
    var allowedIntervals = [1, 5, 10, 15, 20, 30, 60];
    if (!allowedIntervals.includes(interval)) {
      interval = 15;
    }
    var perHour = 60 / interval;
    var localeStr = row.data.locale || form.locale;
    var locale = DayPilot.Locale.find(localeStr) || DayPilot.Locale.US;
    var date = DayPilot.Date.today();
    for (var i = 0; i < 24 * perHour; i++) {
      var time = date.addMinutes(interval * i);
      var item = {};
      item.name = time.toString(row.data.timeFormat || locale.timePattern, locale);
      item.id = time.toString("HH:mm");
      data.push(item);
    }
    var searchable = new Searchable({
      data,
      name: row.field,
      theme: form.theme + "_form_item_time",
      listZIndex: form.zIndex + 1,
      strategy: "startsWith",
      // disabled: !row.enabled
      onSelect: function(args) {
        if (args.ui) {
          interactive.onInput({ "immediate": true });
        }
      }
    });
    var element = searchable.create();
    interactive.element = element;
    interactive.searchable = searchable;
    interactive.canFocus = function() {
      return !interactive.searchable.disabled;
    };
    interactive.focus = function() {
      interactive.searchable.focus();
    };
    interactive.save = function() {
      var value = searchable.selected && searchable.selected.id;
      var result = {};
      result[row.field] = value;
      return result;
    };
    return interactive;
  };
  Form2.prototype._createInteractiveDateTime = function(row) {
    var form = this;
    var interactive = new Interactive();
    interactive.apply = function(row2) {
      interactive.row = row2;
      var searchable = interactive.searchable;
      searchable.disabled = !row2.enabled;
      var timePart = new DayPilot.Date(row2.value).toString("HH:mm");
      searchable.select(timePart);
      var input = interactive.dateInput;
      var picker = interactive.picker;
      if (row2.data.dateFormat) {
        picker.pattern = row2.data.dateFormat;
      }
      var localeStr = row2.data.locale || form.locale;
      if (localeStr) {
        var locale = DayPilot.Locale.find(localeStr) || DayPilot.Locale.US;
        picker.locale = localeStr;
        picker.pattern = locale.datePattern;
      }
      input.disabled = !row2.enabled;
      picker.date = new DayPilot.Date(row2.value);
      var formatted = new DayPilot.Date(row2.value).toString(row2.data.dateFormat || picker.pattern, picker.locale);
      input.value = formatted;
    };
    var dateElement = function createDatePicker() {
      var input = document.createElement("input");
      input.name = row.field;
      var picker = new DayPilot.DatePicker({
        target: input,
        theme: "navigator_modal",
        zIndex: form.zIndex + 1,
        resetTarget: false,
        targetAlignment: "left",
        onTimeRangeSelect: function(args) {
          interactive.onInput({ "immediate": true });
        }
      });
      input.picker = picker;
      input.className = form.theme + "_input_date";
      input.type = "text";
      input.onkeydown = function(e) {
        var letcontinue = false;
        switch (e.keyCode) {
          case 13:
            if (picker.visible) {
              picker.close();
            } else {
              form.doOnKey("Enter");
            }
            break;
          case 27:
            if (picker.visible) {
              picker.close();
            } else {
              form.doOnKey("Escape");
            }
            break;
          case 9:
            picker.close();
            letcontinue = true;
            break;
          default:
            letcontinue = true;
            break;
        }
        if (!letcontinue) {
          e.preventDefault();
          e.stopPropagation();
        }
      };
      input.onfocus = function() {
        picker.show();
      };
      input.onclick = function() {
        picker.show();
      };
      input.oninput = function(e) {
        interactive.onInput();
      };
      input.onblur = function(e) {
        interactive.onBlur();
      };
      interactive.dateInput = input;
      interactive.picker = picker;
      return input;
    }();
    var timeElement = function createTimePicker() {
      var data = [];
      var interval = row.data.timeInterval || 15;
      var allowedIntervals = [1, 5, 10, 15, 20, 30, 60];
      if (!allowedIntervals.includes(interval)) {
        interval = 15;
      }
      var perHour = 60 / interval;
      var localeStr = row.data.locale || form.locale;
      var locale = DayPilot.Locale.find(localeStr) || DayPilot.Locale.US;
      var date = DayPilot.Date.today();
      for (var i = 0; i < 24 * perHour; i++) {
        var time = date.addMinutes(interval * i);
        var item = {};
        item.name = time.toString(row.data.timeFormat || locale.timePattern, locale);
        item.id = time.toString("HH:mm");
        data.push(item);
      }
      var searchable = new Searchable({
        data,
        name: row.field,
        theme: form.theme + "_form_item_time",
        listZIndex: form.zIndex + 1,
        strategy: "startsWith",
        // disabled: !row.enabled
        onSelect: function(args) {
          if (args.ui) {
            interactive.onInput({ "immediate": true });
          }
        }
      });
      interactive.searchable = searchable;
      return searchable.create();
    }();
    var element = document.createElement("div");
    element.className = form.theme + "_form_item_datetime_parent";
    element.appendChild(dateElement);
    element.appendChild(timeElement);
    interactive.element = element;
    interactive.canFocus = function() {
      return !interactive.searchable.disabled;
    };
    interactive.focus = function() {
      interactive.dateInput.focus();
    };
    interactive.save = function() {
      var timeValue = interactive.searchable.selected && interactive.searchable.selected.id;
      var dateValue = interactive.picker.date ? interactive.picker.date.toString() : null;
      var date = new DayPilot.Date(dateValue).getDatePart();
      var value = DayPilot.Date.parse(date.toString("yyyy-dd-MM ") + timeValue, "yyyy-dd-MM HH:mm");
      var result = {};
      result[row.field] = value;
      return result;
    };
    return interactive;
  };
  Form2.prototype.findRowsByField = function(field) {
    return this._rows.filter(function(row) {
      return row.field === field;
    });
  };
  Form2.prototype.findViewById = function(id, value) {
    return this._views.find(function(v) {
      if (v.row.field === id) {
        if (v.row.type === "radio") {
          return v.row.resolved === value;
        } else {
          return true;
        }
      }
      return false;
    });
  };
  Form2.prototype.firstFocusable = function() {
    return this._views.find(function(v) {
      return v.canFocus && v.canFocus();
    });
  };
  Form2.prototype.updateState = function(row, props) {
    var source = this._newRows ? this._newRows : this._rows;
    var index = source.indexOf(row);
    this._newRows = source.map(function(srow) {
      if (srow !== row) {
        return srow;
      }
      if (row.propsEqual(props)) {
        return row;
      }
      var cloned = row.clone();
      for (var name in props) {
        cloned[name] = props[name];
      }
      return cloned;
    });
    return this._newRows[index];
  };
  Form2.prototype.updateInteractive = function(row) {
    var index = this._newRows.indexOf(row);
    this._views[index].apply(row);
  };
  Form2.prototype.applyState = function() {
    var form = this;
    this.updateDependentState();
    if (!this._newRows) {
      return;
    }
    var dirtyRows = this._newRows.filter(function(row, i) {
      return form._rows[i] !== row;
    });
    dirtyRows.forEach(function(row) {
      form.updateInteractive(row);
    });
    this._rows = this._newRows;
    this._newRows = null;
  };
  Form2.prototype.getFieldType = function(item) {
    var known = ["text", "date", "select", "searchable", "radio", "checkbox", "table", "title", "image", "html", "textarea", "scrollable", "time", "datetime"];
    if (known.indexOf(item.type) !== -1) {
      return item.type;
    }
    if (item.type && this.plugins && this.plugins[item.type]) {
      return item.type;
    }
    if (item.image) {
      return "image";
    }
    if (item.html || item.text) {
      return "html";
    }
    if (!item.id) {
      return "title";
    }
    if (item.options) {
      return "searchable";
    }
    if (item.dateFormat) {
      return "date";
    }
    if (item.columns) {
      return "table";
    }
    return "text";
  };
  Form2.prototype.serialize = function() {
    var result = {};
    this._views.forEach(function(interactive) {
      var out = interactive.save();
      for (var name in out) {
        result[name] = out[name];
      }
    });
    return result;
  };
  var RowModel = function() {
    this.id = this.guid();
    this.field = null;
    this.data = null;
    this.type = null;
    this.level = 0;
    this.enabled = true;
    this.value = null;
    this.text = null;
    this.interactive = true;
    this.isValue = false;
    this.checked = false;
    this.resolved = null;
  };
  RowModel.prototype.clone = function() {
    var rm = new RowModel();
    for (var name in this) {
      if (name === "id") {
        continue;
      }
      rm[name] = this[name];
    }
    return rm;
  };
  RowModel.prototype.propsEqual = function(props) {
    for (var name in props) {
      if (this[name] !== props[name]) {
        return false;
      }
    }
    return true;
  };
  RowModel.prototype.guid = function() {
    var S4 = function() {
      return ((1 + Math.random()) * 65536 | 0).toString(16).substring(1);
    };
    return "" + S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4();
  };
  RowModel.prototype.applyValue = function(name, value) {
    if (this.field !== name) {
      return;
    }
    this.value = value;
    if (this.isValue && value === this.resolved) {
      this.checked = true;
    }
  };
  var Interactive = function() {
    this.element = null;
    this.canFocus = function() {
      return false;
    };
    this.apply = function(row) {
    };
    this.focus = function() {
    };
    this.save = function() {
      return {};
    };
  };
  function flatten(object, result, prefix) {
    result = result || {};
    prefix = prefix || "";
    for (var name in object) {
      var src = object[name];
      if (typeof src === "object") {
        if (Object.prototype.toString.call(src) === "[object Array]") {
          result[prefix + name] = src;
        } else if (src && src.toJSON) {
          result[prefix + name] = src.toJSON();
        } else {
          flatten(src, result, prefix + name + ".");
        }
      } else {
        result[prefix + name] = src;
      }
    }
    return result;
  }
  DayPilot.Form = Form2;
})(local7);
var { Form } = local7;

// node_modules/@daypilot/modal/src/modal.js
var local8 = {};
(function(DayPilot) {
  "use strict";
  if (DayPilot.ModalStatic) {
    return;
  }
  DayPilot.ModalStatic = {};
  DayPilot.ModalStatic.list = [];
  DayPilot.ModalStatic.hide = function() {
    if (this.list.length > 0) {
      var last = this.list.pop();
      if (last) {
        last.hide();
      }
    }
  };
  DayPilot.ModalStatic.remove = function(modal) {
    var list = DayPilot.ModalStatic.list;
    for (var i = 0; i < list.length; i++) {
      if (list[i] === modal) {
        list.splice(i, 1);
        return;
      }
    }
  };
  DayPilot.ModalStatic.close = function(result) {
    DayPilot.ModalStatic.result(result);
    DayPilot.ModalStatic.hide();
  };
  DayPilot.ModalStatic.result = function(r) {
    var list = DayPilot.ModalStatic.list;
    if (list.length > 0) {
      list[list.length - 1].result = r;
    }
  };
  DayPilot.ModalStatic.displayed = function(modal) {
    var list = DayPilot.ModalStatic.list;
    for (var i = 0; i < list.length; i++) {
      if (list[i] === modal) {
        return true;
      }
    }
    return false;
  };
  DayPilot.ModalStatic.stretch = function() {
    if (this.list.length > 0) {
      var last = this.list[this.list.length - 1];
      if (last) {
        last.stretch();
      }
    }
  };
  DayPilot.ModalStatic.last = function() {
    var list = DayPilot.ModalStatic.list;
    if (list.length > 0) {
      return list[list.length - 1];
    }
    return null;
  };
  var Sheet = function() {
    var style = document.createElement("style");
    style.setAttribute("type", "text/css");
    if (!style.styleSheet) {
      style.appendChild(document.createTextNode(""));
    }
    var h = document.head || document.getElementsByTagName("head")[0];
    h.appendChild(style);
    var oldStyle = !!style.styleSheet;
    var sheet2 = {};
    sheet2.rules = [];
    sheet2.commit = function() {
      try {
        if (oldStyle) {
          style.styleSheet.cssText = this.rules.join("\n");
        }
      } catch (e) {
      }
    };
    sheet2.add = function(selector, rules, index) {
      if (oldStyle) {
        this.rules.push(selector + "{" + rules + "}");
        return;
      }
      if (style.sheet.insertRule) {
        if (typeof index === "undefined") {
          index = style.sheet.cssRules.length;
        }
        style.sheet.insertRule(selector + "{" + rules + "}", index);
      } else if (style.sheet.addRule) {
        style.sheet.addRule(selector, rules, index);
      } else {
        throw "No CSS registration method found";
      }
    };
    return sheet2;
  };
  var iconCalendar = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojY2NjY2NjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjM4MDM3MzM2O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDE5MjgiCiAgICAgICB3aWR0aD0iOS45MTUzMDYxIgogICAgICAgaGVpZ2h0PSIxMS4zNjkzNyIKICAgICAgIHg9IjAuMTE3MTg3NSIKICAgICAgIHk9Ii0zLjAwOTk5NTciCiAgICAgICByeT0iMS4zMTE4NTA1IiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNjY2NjY2M7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNTk4MTQwMTI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MTkzMCIKICAgICAgIHdpZHRoPSIxLjUzNDQxMzYiCiAgICAgICBoZWlnaHQ9IjIuMjE5ODI1IgogICAgICAgeD0iMi4xNTU4NDgzIgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHJ5PSIwLjY3MTc4OTE3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iMS41MjM5NTA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QxOTQ4IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjY3MTc4OTE3IgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHg9IjYuNDUyNzIzNSIKICAgICAgIGhlaWdodD0iMi4yMTk4MjUiCiAgICAgICB3aWR0aD0iMS41MzQ0MTM2IgogICAgICAgaWQ9InJlY3QyMDAzIgogICAgICAgc3R5bGU9ImZpbGw6I2NjY2NjYztmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS41OTgxNDAxMjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAwNSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIHk9Ii0xLjE2NTg0NjYiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iNi45OTI3MDA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDA3IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAxMyIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjEuNTIzOTUwNiIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHJ5PSIwLjI5NjAxNDciIC8+CiAgICA8cmVjdAogICAgICAgcnk9IjAuMjk2MDE0NyIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGlkPSJyZWN0MjAxNSIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDIwMTciCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB4PSI2Ljk5MjcwMDYiCiAgICAgICB5PSIxLjgwMjkwMzQiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSI0LjczMjU5MDciCiAgICAgICB4PSIxLjU2MzAxMzEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBpZD0icmVjdDIwMTkiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InJlY3QyMDIxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgeD0iNC4yNTgzMjU2IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgcnk9IjAuMjk2MDE0NyIgLz4KICAgIDxyZWN0CiAgICAgICByeT0iMC4yOTYwMTQ3IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgeD0iNy4wMzE3NjMxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDIzIgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogIDwvZz4KPC9zdmc+Cg==";
  var iconExpand = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDMxNzMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoxLjg1MTk2ODUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Ik0gMC45NTQxNDgzOCwwLjY4MTYwMzEgNS4wMzkwNjI1LDUuNDExNTM4NiA5LjEyMzk3NjYsMC42ODE2MDMxIgogICAgICAgIC8+CiAgPC9nPgo8L3N2Zz4K";
  var sheet = new Sheet();
  sheet.add(".modal_default_main", "border: 10px solid #ccc; max-width: 90%;");
  sheet.add(".modal_default_main:focus", "outline: none;");
  sheet.add(".modal_default_content", "padding: 10px 0px;");
  sheet.add(".modal_default_inner", "padding: 20px;");
  sheet.add(".modal_default_input", "padding: 10px 0px;");
  sheet.add(".modal_default_buttons", "margin-top: 10px;");
  sheet.add(".modal_default_buttons", "padding: 10px 0px;");
  sheet.add(".modal_default_form_item", "padding: 10px 0px; position: relative;");
  sheet.add(".modal_default_form_item_level1", "border-left: 2px solid #ccc; margin-left: 10px; padding-left: 20px;");
  sheet.add(".modal_default_form_item.modal_default_form_title", "font-size: 1.5rem; font-weight: bold;");
  sheet.add(".modal_default_form_item input[type=text]", "width: 100%; box-sizing: border-box;");
  sheet.add(".modal_default_form_item textarea", "width: 100%; height: 200px; box-sizing: border-box;");
  sheet.add(".modal_default_form_item input[type=select]", "width: 100%; box-sizing: border-box;");
  sheet.add(".modal_default_form_item label", "display: block;");
  sheet.add(".modal_default_form_item select", "width: 100%; box-sizing: border-box;");
  sheet.add(".modal_default_form_item_label", "margin: 2px 0px;");
  sheet.add(".modal_default_form_item_image img", "max-width: 100%; height: auto;");
  sheet.add(".modal_default_form_item_invalid", "");
  sheet.add(".modal_default_form_item_invalid_message", "position: absolute; right: 0px; top: 9px; background-color: red; color: #ffffff; padding: 2px; border-radius: 2px;");
  sheet.add(".modal_default_background", "opacity: 0.5; background-color: #000;");
  sheet.add(".modal_default_ok", "padding: 3px; width: 80px;");
  sheet.add(".modal_default_cancel", "padding: 3px; width: 80px;");
  sheet.add(".modal_default_form_item_date", "position: relative;");
  sheet.add(".modal_default_form_item_date:after", "content: ''; position: absolute; right: 7px; top: 50%; margin-top: 3px; width: 10px; height: 15px; background-image:url(" + iconCalendar + ")");
  if (navigator.userAgent.indexOf("Edge") !== -1) {
    sheet.add(".modal_default_form_item_date input::-ms-clear", "display: none;");
  }
  sheet.add(".modal_default_form_item_scrollable_scroll", "width: 100%; height: 200px; box-sizing: border-box; border: 1px solid #ccc; overflow-y: auto;");
  sheet.add(".modal_default_form_item_scrollable_scroll_content", "padding: 5px;");
  sheet.add(".modal_default_form_item_searchable", "position: relative;");
  sheet.add(".modal_default_form_item_searchable_icon", "");
  sheet.add(".modal_default_form_item_searchable_icon:after", "content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url(" + iconExpand + ");");
  sheet.add(".modal_default_form_item_searchable_list", "box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;");
  sheet.add(".modal_default_form_item_searchable_list_item", "background: white; padding: 2px; cursor: default;");
  sheet.add(".modal_default_form_item_searchable_list_item_highlight", "background: #ccc;");
  sheet.add(".modal_default_form_item_time", "position: relative;");
  sheet.add(".modal_default_form_item_time_icon", "");
  sheet.add(".modal_default_form_item_time_icon:after", "content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url(" + iconExpand + ");");
  sheet.add(".modal_default_form_item_time_list", "box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;");
  sheet.add(".modal_default_form_item_time_list_item", "background: white; padding: 2px; cursor: default;");
  sheet.add(".modal_default_form_item_time_list_item_highlight", "background: #ccc;");
  sheet.add(".modal_default_form_item_datetime_parent", "display: flex;");
  sheet.add(".modal_default_form_item_datetime .modal_default_form_item_time_main", "margin-left: 5px;");
  sheet.add(".modal_default_form_item_datetime input[type='text'].modal_default_input_date ", "");
  sheet.add(".modal_default_form_item_tabular_main", "margin-top: 10px;");
  sheet.add(".modal_default_form_item_tabular_table", "display: table; width: 100%; xbackground-color: #fff; border-collapse: collapse;");
  sheet.add(".modal_default_form_item_tabular_tbody", "display: table-row-group;");
  sheet.add(".modal_default_form_item_tabular_row", "display: table-row;");
  sheet.add(".modal_default_form_item_tabular_row.modal_default_form_item_tabular_header", "");
  sheet.add(".modal_default_form_item_tabular_cell.modal_default_form_item_tabular_rowaction", "padding: 0px; width: 23px;");
  sheet.add(".modal_default_form_item_tabular_cell", "display: table-cell; border: 0px; padding: 2px 2px 2px 0px; cursor: default; vertical-align: bottom;");
  sheet.add(".modal_default_form_item_tabular_header .modal_default_form_item_tabular_cell", "padding-left: 0px; padding-bottom: 0px;");
  sheet.add(".modal_default_form_item_tabular_table input[type=text], .modal_default_form_item_tabular_table input[type=number]", "width:100%; box-sizing: border-box;");
  sheet.add(".modal_default_form_item_tabular_table select", "width:100%; height:100%; box-sizing: border-box;");
  sheet.add(".modal_default_form_item_tabular_plus", "display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;");
  sheet.add(".modal_default_form_item_tabular_plus:after", `content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSA1LjAgMC41IEwgNS4wIDkuNSBNIDAuNSA1LjAgTCA5LjUgNS4wJyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==")`);
  sheet.add(".modal_default_form_item_tabular_delete", "display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;");
  sheet.add(".modal_default_form_item_tabular_delete:after", `content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMC41IEwgOS41IDkuNSBNIDAuNSA5LjUgTCA5LjUgMC41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==")`);
  sheet.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_plus", "display: none;");
  sheet.add(".modal_default_form_item_tabular_plus_max.modal_default_form_item_tabular_plus", "display: none;");
  sheet.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_delete", "visibility: hidden;");
  sheet.add(".modal_default_form_item_tabular_empty", "height: 1px; margin: 5px 23px 5px 0px; background-color: #ccc;");
  sheet.add(".modal_default_form_item_tabular_spacer .modal_default_form_item_tabular_cell", "padding: 0px;");
  sheet.add(".modal_min_main", "border: 1px solid #ccc; max-width: 90%;");
  sheet.add(".modal_min_background", "opacity: 0.5; background-color: #000;");
  sheet.add(".modal_min_ok", "padding: 3px 10px;");
  sheet.add(".modal_min_cancel", "padding: 3px 10px;");
  sheet.add(".navigator_modal_main", "border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;");
  sheet.add(".navigator_modal_main *, .navigator_modal_main *:before, .navigator_modal_main *:after", "box-sizing: content-box;");
  sheet.add(".navigator_modal_month", "font-size: 11px;");
  sheet.add(".navigator_modal_day", "color: black;");
  sheet.add(".navigator_modal_weekend", "background-color: #f0f0f0;");
  sheet.add(".navigator_modal_dayheader", "color: black;");
  sheet.add(".navigator_modal_line", "border-bottom: 1px solid #c0c0c0;");
  sheet.add(".navigator_modal_dayother", "color: gray;");
  sheet.add(".navigator_modal_todaybox", "border: 1px solid red;");
  sheet.add(".navigator_modal_title, .navigator_modal_titleleft, .navigator_modal_titleright", "border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;");
  sheet.add(".navigator_modal_busy", "font-weight: bold;");
  sheet.add(".navigator_modal_cell", "text-align: center;");
  sheet.add(".navigator_modal_select .navigator_modal_cell_box", "background-color: #FFE794; opacity: 0.5;");
  sheet.add(".navigator_modal_title", "text-align: center;");
  sheet.add(".navigator_modal_titleleft, .navigator_modal_titleright", "text-align: center;");
  sheet.add(".navigator_modal_dayheader", "text-align: center;");
  sheet.add(".navigator_modal_weeknumber", "text-align: center;");
  sheet.add(".navigator_modal_cell_text", "cursor: pointer;");
  sheet.commit();
  DayPilot.Modal = function(options) {
    this.autoFocus = true;
    this.focus = null;
    this.autoStretch = true;
    this.autoStretchFirstLoadOnly = false;
    this.className = null;
    this.theme = "modal_default";
    this.disposeOnClose = true;
    this.dragDrop = true;
    this.loadingHtml = null;
    this.maxHeight = null;
    this.scrollWithPage = true;
    this.useIframe = true;
    this.zIndex = 99999;
    this.left = null;
    this.width = 600;
    this.top = 20;
    this.height = 200;
    this.locale = null;
    this.closed = null;
    this.onClose = null;
    this.onClosed = null;
    this.onShow = null;
    var This = this;
    this.id = "_" + (/* @__PURE__ */ new Date()).getTime() + "n" + Math.random() * 10;
    this._registered = false;
    this._start = null;
    this._coords = null;
    this.showHtml = function(html) {
      if (DayPilot.ModalStatic.displayed(this)) {
        throw "This modal dialog is already displayed.";
      }
      if (!this.div) {
        this._create();
      }
      this._update();
      if (this.useIframe) {
        var delayed = function(p, innerHTML) {
          return function() {
            p.setInnerHTML(p.id + "iframe", innerHTML);
          };
        };
        window.setTimeout(delayed(this, html), 0);
      } else {
        if (html.nodeType) {
          this.div.appendChild(html);
        } else {
          this.div.innerHTML = html;
        }
      }
      this._update();
      this._register();
      this._doShow();
    };
    this.showUrl = function(url) {
      if (DayPilot.ModalStatic.displayed(this)) {
        throw "This modal dialog is already displayed.";
      }
      if (this.useIframe) {
        if (!this.div) {
          this._create();
        }
        var loadingHtml = this.loadingHtml;
        if (loadingHtml) {
          this.iframe.src = "about:blank";
          this.setInnerHTML(this.id + "iframe", loadingHtml);
        }
        this.re(this.iframe, "load", this._onIframeLoad);
        this.iframe.src = url;
        this._update();
        this._register();
        this._doShow();
      } else {
        This._ajax({
          "url": url,
          "success": function(args) {
            var html = args.request.responseText;
            This.showHtml(html);
          },
          "error": function(args) {
            This.showHtml("Error loading the modal dialog");
          }
        });
      }
    };
    this._doShow = function() {
      if (typeof This.onShow === "function") {
        var args = {};
        args.root = This._body();
        args.modal = This;
        This.onShow(args);
      }
    };
    this._body = function() {
      return This.iframe ? This.iframe.contentWindow.document : This.div;
    };
    this._ajax = function(object) {
      var req = new XMLHttpRequest();
      if (!req) {
        return;
      }
      var method = object.method || "GET";
      var success = object.success || function() {
      };
      var error = object.error || function() {
      };
      var data = object.data;
      var url = object.url;
      req.open(method, url, true);
      req.setRequestHeader("Content-type", "text/plain");
      req.onreadystatechange = function() {
        if (req.readyState !== 4)
          return;
        if (req.status !== 200 && req.status !== 304) {
          if (error) {
            var args = {};
            args.request = req;
            error(args);
          } else {
            if (window.console) {
              console.log("HTTP error " + req.status);
            }
          }
          return;
        }
        var args = {};
        args.request = req;
        success(args);
      };
      if (req.readyState === 4) {
        return;
      }
      if (typeof data === "object") {
        data = JSON.stringify(data);
      }
      req.send(data);
    };
    this._update = function() {
      delete this.result;
      var win = window;
      var doc = document;
      var scrollY = win.pageYOffset ? win.pageYOffset : doc.documentElement && doc.documentElement.scrollTop ? doc.documentElement.scrollTop : doc.body.scrollTop;
      var height = function() {
        return This._windowRect().y;
      };
      if (this.theme) {
        this.hideDiv.className = this.theme + "_background";
      }
      if (this.zIndex) {
        this.hideDiv.style.zIndex = this.zIndex;
      }
      this.hideDiv.style.display = "";
      window.setTimeout(function() {
        if (This.hideDiv) {
          This.hideDiv.onclick = function() {
            This.hide({ "backgroundClick": true });
          };
        }
      }, 500);
      if (this.theme) {
        this.div.className = this.theme + "_main";
      } else {
        this.div.className = "";
      }
      if (this.className) {
        this.div.className += " " + this.className;
      }
      if (this.left) {
        this.div.style.left = this.left + "px";
      } else {
        this.div.style.marginLeft = "-" + Math.floor(this.width / 2) + "px";
      }
      this.div.style.position = "absolute";
      this.div.style.boxSizing = "content-box";
      this.div.style.top = scrollY + this.top + "px";
      this.div.style.width = this.width + "px";
      if (this.zIndex) {
        this.div.style.zIndex = this.zIndex;
      }
      if (this.height) {
        if (this.useIframe || !this.autoStretch) {
          this.div.style.height = this.height + "px";
        } else {
          this.div.style.height = "";
        }
      }
      if (this.useIframe && this.height) {
        this.iframe.style.height = this.height + "px";
      }
      this.div.style.display = "";
      this._updateHorizontal();
      DayPilot.ModalStatic.remove(this);
      DayPilot.ModalStatic.list.push(this);
    };
    this._onIframeLoad = function() {
      This.iframe.contentWindow.modal = This;
      if (This.autoStretch) {
        This.stretch();
      }
    };
    this.stretch = function() {
      var height = function() {
        return This._windowRect().y;
      };
      var width = function() {
        return This._windowRect().x;
      };
      if (this.useIframe) {
        var maxWidth = width() - 40;
        for (var w = this.width; w < maxWidth && this._hasHorizontalScrollbar(); w += 10) {
          this.div.style.width = w + "px";
          this.div.style.marginLeft = "-" + Math.floor(w / 2) + "px";
        }
        var maxHeight = this.maxHeight || height() - 2 * this.top;
        for (var h = this.height; h < maxHeight && this._hasVerticalScrollbar(); h += 10) {
          this.iframe.style.height = h + "px";
          this.div.style.height = h + "px";
        }
        if (this.autoStretchFirstLoadOnly) {
          this.ue(this.iframe, "load", this._onIframeLoad);
        }
      } else {
        this.div.style.height = "";
      }
    };
    this._hasHorizontalScrollbar = function() {
      var document2 = this.iframe.contentWindow.document;
      var root = document2.compatMode === "BackCompat" ? document2.body : document2.documentElement;
      var scrollWidth = root.scrollWidth;
      var children = document2.body.children;
      for (var i = 0; i < children.length; i++) {
        var bottom = children[i].offsetLeft + children[i].offsetWidth;
        scrollWidth = Math.max(scrollWidth, bottom);
      }
      var isHorizontalScrollbar = scrollWidth > root.clientWidth;
      return isHorizontalScrollbar;
    };
    this._hasVerticalScrollbar = function() {
      var document2 = this.iframe.contentWindow.document;
      var root = document2.compatMode === "BackCompat" ? document2.body : document2.documentElement;
      var scrollHeight = root.scrollHeight;
      var children = document2.body.children;
      for (var i = 0; i < children.length; i++) {
        var bottom = children[i].offsetTop + children[i].offsetHeight;
        scrollHeight = Math.max(scrollHeight, bottom);
      }
      var isVerticalScrollbar = scrollHeight > root.clientHeight;
      return isVerticalScrollbar;
    };
    this._windowRect = function() {
      var doc = document;
      if (doc.compatMode === "CSS1Compat" && doc.documentElement && doc.documentElement.clientWidth) {
        var x = doc.documentElement.clientWidth;
        var y = doc.documentElement.clientHeight;
        return { x, y };
      } else {
        var x = doc.body.clientWidth;
        var y = doc.body.clientHeight;
        return { x, y };
      }
    };
    this._register = function() {
      if (this._registered) {
        return;
      }
      this.re(window, "resize", this._onWindowResize);
      this.re(window, "scroll", this._onWindowScroll);
      if (this.dragDrop) {
        this.re(document, "mousemove", this._onMouseMove);
        this.re(document, "mouseup", this._onMouseUp);
      }
      this._registered = true;
    };
    this._unregister = function() {
      this.ue(window, "resize", this._onWindowResize);
      this.ue(window, "scroll", this._onWindowScroll);
      if (this.dragDrop) {
        this.ue(document, "mousemove", this._onMouseMove);
        this.ue(document, "mouseup", this._onMouseUp);
      }
      this._registered = false;
    };
    this._onDragStart = function(e) {
      if (e.target !== This.div) {
        return;
      }
      e.preventDefault();
      This.div.style.cursor = "move";
      This._maskIframe();
      This._coords = This.mc(e || window.event);
      This._start = { x: This.div.offsetLeft, y: This.div.offsetTop };
    };
    this._onMouseMove = function(e) {
      if (!This._coords) {
        return;
      }
      var e = e || window.event;
      var now = This.mc(e);
      var x = now.x - This._coords.x;
      var y = now.y - This._coords.y;
      This.div.style.marginLeft = "0px";
      This.div.style.top = This._start.y + y + "px";
      This.div.style.left = This._start.x + x + "px";
    };
    this._onMouseUp = function(e) {
      if (!This._coords) {
        return;
      }
      This._unmaskIframe();
      This.div.style.cursor = null;
      This._coords = null;
    };
    this._maskIframe = function() {
      if (!this.useIframe) {
        return;
      }
      var opacity = 80;
      var mask = document.createElement("div");
      mask.style.backgroundColor = "#ffffff";
      mask.style.filter = "alpha(opacity=" + opacity + ")";
      mask.style.opacity = "0." + opacity;
      mask.style.width = "100%";
      mask.style.height = this.height + "px";
      mask.style.position = "absolute";
      mask.style.left = "0px";
      mask.style.top = "0px";
      this.div.appendChild(mask);
      this.mask = mask;
    };
    this._unmaskIframe = function() {
      if (!this.useIframe) {
        return;
      }
      this.div.removeChild(this.mask);
      this.mask = null;
    };
    this._onWindowResize = function() {
      This._updateTop();
      This._updateHorizontal();
    };
    this._onWindowScroll = function() {
      This._updateTop();
    };
    this._updateHorizontal = function() {
      if (This.left) {
        return;
      }
      if (!This.div) {
        return;
      }
      var width = This.div.offsetWidth;
      This.div.style.marginLeft = "-" + Math.floor(width / 2) + "px";
    };
    this._updateTop = function() {
      if (!This.hideDiv) {
        return;
      }
      if (!This.div) {
        return;
      }
      if (This.hideDiv.style.display === "none") {
        return;
      }
      if (This.div.style.display === "none") {
        return;
      }
      var scrollY = This._parent.scrollY();
      if (!This.scrollWithPage) {
        This.div.style.top = scrollY + This.top + "px";
      }
    };
    this._parent = {};
    this._parent.container = function() {
      return This.container || document.body;
    };
    this._parent.scrollY = function() {
      var c = This._parent.container();
      if (c === document.body) {
        return window.pageYOffset ? window.pageYOffset : document.documentElement && document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop;
      } else {
        return c.scrollTop;
      }
    };
    this.re = function(el, ev, func) {
      if (el.addEventListener) {
        el.addEventListener(ev, func, false);
      } else if (el.attachEvent) {
        el.attachEvent("on" + ev, func);
      }
    };
    this.ue = function(el, ev, func) {
      if (el.removeEventListener) {
        el.removeEventListener(ev, func, false);
      } else if (el.detachEvent) {
        el.detachEvent("on" + ev, func);
      }
    };
    this.mc = function(ev) {
      if (ev.pageX || ev.pageY) {
        return { x: ev.pageX, y: ev.pageY };
      }
      return {
        x: ev.clientX + document.documentElement.scrollLeft,
        y: ev.clientY + document.documentElement.scrollTop
      };
    };
    this.abs = function(element) {
      var r = {
        x: element.offsetLeft,
        y: element.offsetTop
      };
      while (element.offsetParent) {
        element = element.offsetParent;
        r.x += element.offsetLeft;
        r.y += element.offsetTop;
      }
      return r;
    };
    this._create = function() {
      var container = This._parent.container();
      var isRoot = container === document.body;
      var position = isRoot ? "fixed" : "absolute";
      var hide = document.createElement("div");
      hide.id = this.id + "hide";
      hide.style.position = position;
      hide.style.left = "0px";
      hide.style.top = "0px";
      hide.style.right = "0px";
      hide.style.bottom = "0px";
      hide.oncontextmenu = function() {
        return false;
      };
      hide.onmousedown = function() {
        return false;
      };
      container.appendChild(hide);
      var div = document.createElement("div");
      div.id = this.id + "popup";
      div.style.position = position;
      div.style.left = "50%";
      div.style.top = "0px";
      div.style.backgroundColor = "white";
      div.style.width = "50px";
      div.style.height = "50px";
      if (this.dragDrop) {
        div.onmousedown = this._onDragStart;
      }
      div.addEventListener("keydown", function(e) {
        e.stopPropagation();
      });
      var defaultHeight = 50;
      var iframe = null;
      if (this.useIframe) {
        iframe = document.createElement("iframe");
        iframe.id = this.id + "iframe";
        iframe.name = this.id + "iframe";
        iframe.frameBorder = "0";
        iframe.style.width = "100%";
        iframe.style.height = defaultHeight + "px";
        div.appendChild(iframe);
      }
      container.appendChild(div);
      this.div = div;
      this.iframe = iframe;
      this.hideDiv = hide;
    };
    this.setInnerHTML = function(id, innerHTML) {
      var frame = window.frames[id];
      var doc = frame.contentWindow || frame.document || frame.contentDocument;
      if (doc.document) {
        doc = doc.document;
      }
      if (doc.body == null) {
        doc.write("<body></body>");
      }
      if (innerHTML.nodeType) {
        doc.body.appendChild(innerHTML);
      } else {
        doc.body.innerHTML = innerHTML;
      }
      if (This.autoStretch) {
        if (!This.autoStretchFirstLoadOnly || !This._stretched) {
          This.stretch();
          This._stretched = true;
        }
      }
    };
    this.close = function(result) {
      this.result = result;
      this.hide();
    };
    this.closeSerialized = function() {
      var ref = This._body();
      var fields = ref.querySelectorAll("input, textarea, select");
      var result = {};
      for (var i = 0; i < fields.length; i++) {
        var field = fields[i];
        var name = field.name;
        if (!name) {
          continue;
        }
        var value = field.value;
        result[name] = value;
      }
      This.close(result);
    };
    this.hide = function(options2) {
      options2 = options2 || {};
      var args = {};
      args.backgroundClick = !!options2.backgroundClick;
      args.result = this.result;
      args.canceled = typeof this.result === "undefined";
      args.preventDefault = function() {
        this.preventDefault.value = true;
      };
      if (typeof this.onClose === "function") {
        this.onClose(args);
        if (args.preventDefault.value) {
          return;
        }
      }
      if (this.div) {
        this.div.style.display = "none";
        this.hideDiv.style.display = "none";
        if (!this.useIframe) {
          this.div.innerHTML = null;
        }
      }
      window.focus();
      DayPilot.ModalStatic.remove(this);
      if (typeof this.onClosed === "function") {
        this.onClosed(args);
      } else if (this.closed) {
        this.closed();
      }
      delete this.result;
      if (this.disposeOnClose) {
        This._unregister();
        This._de(This.div);
        This._de(This.hideDiv);
        This.div = null;
        This.hideDiv = null;
        This.iframe = null;
      }
    };
    this._de = function(e) {
      if (!e) {
        return;
      }
      e.parentNode && e.parentNode.removeChild(e);
    };
    this._applyOptions = function() {
      if (!options) {
        return;
      }
      for (var name in options) {
        this[name] = options[name];
      }
    };
    this._applyOptions();
  };
  DayPilot.Modal.alert = function(message, options) {
    options = options || {};
    options.height = options.height || 40;
    options.useIframe = false;
    var okText = options.okText || "OK";
    var cancelText = options.cancelText || "Cancel";
    return DayPilot.getPromise(function(success, failure) {
      options.onClosed = function(args) {
        success(args);
      };
      var modal = new DayPilot.Modal(options);
      var div = document.createElement("div");
      div.className = modal.theme + "_inner";
      var text = document.createElement("div");
      text.className = modal.theme + "_content";
      text.innerHTML = message;
      var buttons = document.createElement("div");
      buttons.className = modal.theme + "_buttons";
      var buttonOK = document.createElement("button");
      buttonOK.innerText = okText;
      buttonOK.className = modal.theme + "_ok";
      buttonOK.onclick = function(e) {
        DayPilot.ModalStatic.close("OK");
      };
      buttons.appendChild(buttonOK);
      div.appendChild(text);
      div.appendChild(buttons);
      modal.showHtml(div);
      if (modal.autoFocus) {
        buttonOK.focus();
      }
    });
  };
  DayPilot.Modal.confirm = function(message, options) {
    options = options || {};
    options.height = options.height || 40;
    options.useIframe = false;
    var okText = options.okText || "OK";
    var cancelText = options.cancelText || "Cancel";
    return DayPilot.getPromise(function(success, failure) {
      options.onClosed = function(args) {
        success(args);
      };
      var modal = new DayPilot.Modal(options);
      var div = document.createElement("div");
      div.className = modal.theme + "_inner";
      var text = document.createElement("div");
      text.className = modal.theme + "_content";
      text.innerHTML = message;
      var buttons = document.createElement("div");
      buttons.className = modal.theme + "_buttons";
      var buttonOK = document.createElement("button");
      buttonOK.innerText = okText;
      buttonOK.className = modal.theme + "_ok";
      buttonOK.onclick = function(e) {
        DayPilot.ModalStatic.close("OK");
      };
      var space = document.createTextNode(" ");
      var buttonCancel = document.createElement("button");
      buttonCancel.innerText = cancelText;
      buttonCancel.className = modal.theme + "_cancel";
      buttonCancel.onclick = function(e) {
        DayPilot.ModalStatic.close();
      };
      buttons.appendChild(buttonOK);
      buttons.appendChild(space);
      buttons.appendChild(buttonCancel);
      div.appendChild(text);
      div.appendChild(buttons);
      modal.showHtml(div);
      if (modal.autoFocus) {
        buttonOK.focus();
      }
    });
  };
  DayPilot.Modal.prompt = function(message, defaultValue, options) {
    if (typeof defaultValue === "object") {
      options = defaultValue;
      defaultValue = "";
    }
    options = options || {};
    options.height = options.height || 40;
    options.useIframe = false;
    var okText = options.okText || "OK";
    var cancelText = options.cancelText || "Cancel";
    var inputText = defaultValue || "";
    return DayPilot.getPromise(function(success, failure) {
      options.onClosed = function(args) {
        success(args);
      };
      var modal = new DayPilot.Modal(options);
      var div = document.createElement("div");
      div.className = modal.theme + "_inner";
      var text = document.createElement("div");
      text.className = modal.theme + "_content";
      text.innerHTML = message;
      var inputs = document.createElement("div");
      inputs.className = modal.theme + "_input";
      var input = document.createElement("input");
      input.value = inputText;
      input.style.width = "100%";
      input.onkeydown = function(e) {
        var letcontinue = false;
        switch (e.keyCode) {
          case 13:
            modal.close(this.value);
            break;
          case 27:
            modal.close();
            break;
          default:
            letcontinue = true;
            break;
        }
        if (!letcontinue) {
          e.preventDefault();
          e.stopPropagation();
        }
      };
      inputs.appendChild(input);
      var buttons = document.createElement("div");
      buttons.className = modal.theme + "_buttons";
      var buttonOK = document.createElement("button");
      buttonOK.innerText = okText;
      buttonOK.className = modal.theme + "_ok";
      buttonOK.onclick = function(e) {
        modal.close(input.value);
      };
      var space = document.createTextNode(" ");
      var buttonCancel = document.createElement("button");
      buttonCancel.innerText = cancelText;
      buttonCancel.className = modal.theme + "_cancel";
      buttonCancel.onclick = function(e) {
        modal.close();
      };
      buttons.appendChild(buttonOK);
      buttons.appendChild(space);
      buttons.appendChild(buttonCancel);
      div.appendChild(text);
      div.appendChild(inputs);
      div.appendChild(buttons);
      modal.showHtml(div);
      if (modal.autoFocus) {
        input.focus();
      }
    });
  };
  var isArray = function(arg) {
    return Object.prototype.toString.call(arg) === "[object Array]";
  };
  function setPathValue(target, path, value) {
    var iodot = path.indexOf(".");
    if (iodot === -1) {
      if (path !== "__proto__" && path !== "constructor") {
        target[path] = value;
      }
      return;
    }
    var segment = path.substring(0, iodot);
    if (segment === "__proto__" || segment === "constructor") {
      return;
    }
    var remainder = path.substring(iodot + 1);
    var child = target[segment];
    if (typeof child !== "object" || child === null) {
      target[segment] = {};
      child = target[segment];
    }
    setPathValue(child, remainder, value);
  }
  DayPilot.Modal.form = function(form, data, options) {
    if (arguments.length === 1) {
      var arg = form;
      var isa = isArray(arg);
      if (isa) {
        data = {};
      } else if (typeof arg === "object") {
        data = form;
        form = [];
        for (var name in data) {
          var item = {};
          item.name = name;
          item.id = name;
          form.push(item);
        }
      } else {
        throw "Invalid DayPilot.Modal.form() parameter";
      }
    }
    var opts = {};
    for (var name in options) {
      opts[name] = options[name];
    }
    opts.height = opts.height || 40;
    opts.useIframe = false;
    var okText = opts.okText || "OK";
    var cancelText = opts.cancelText || "Cancel";
    return DayPilot.getPromise(function(success, failure) {
      opts.onClosed = function(args) {
        if (args.result) {
          var mergedResult = JSON.parse(JSON.stringify(data));
          for (var name2 in args.result) {
            setPathValue(mergedResult, name2, args.result[name2]);
          }
          args.result = mergedResult;
        }
        success(args);
      };
      var modal = new DayPilot.Modal(opts);
      var div = document.createElement("div");
      div.className = modal.theme + "_inner";
      var inputs = document.createElement("div");
      inputs.className = modal.theme + "_input";
      var f = new Form({
        theme: modal.theme,
        form,
        data,
        zIndex: modal.zIndex,
        locale: modal.locale,
        plugins: modal.plugins,
        onKey: function(args) {
          switch (args.key) {
            case "Enter":
              if (f.validate()) {
                modal.close(f.serialize());
              }
              break;
            case "Escape":
              modal.close();
              break;
          }
        },
        onChange: function(args) {
          if (typeof modal.onChange === "function") {
            modal.onChange(args);
          }
        }
      });
      var el = f.create();
      inputs.append(el);
      var buttons = document.createElement("div");
      buttons.className = modal.theme + "_buttons";
      var buttonOK = document.createElement("button");
      buttonOK.innerText = okText;
      buttonOK.className = modal.theme + "_ok";
      if (opts.okDisabled) {
        buttonOK.disabled = true;
      }
      buttonOK.onclick = function(e) {
        if (f.validate()) {
          modal.close(f.serialize());
        }
      };
      var space = document.createTextNode(" ");
      var buttonCancel = document.createElement("button");
      buttonCancel.innerText = cancelText;
      buttonCancel.className = modal.theme + "_cancel";
      buttonCancel.onclick = function(e) {
        modal.close();
      };
      buttonCancel.onmousedown = function(e) {
        f.canceling = true;
      };
      buttons.appendChild(buttonOK);
      buttons.appendChild(space);
      buttons.appendChild(buttonCancel);
      div.appendChild(inputs);
      div.appendChild(buttons);
      modal.showHtml(div);
      modal.div.setAttribute("tabindex", "-1");
      modal.div.addEventListener("keydown", function(e) {
        switch (e.keyCode) {
          case 27:
            modal.close();
            break;
          case 13:
            if (f.validate()) {
              modal.close(f.serialize());
            }
            break;
        }
      });
      if (modal.focus) {
        var toBeFocused = null;
        if (typeof modal.focus === "object") {
          var id = modal.focus.id;
          var value = modal.focus.value;
          toBeFocused = f.findViewById(id, value);
        } else if (typeof modal.focus === "string") {
          toBeFocused = f.findViewById(modal.focus);
        }
        if (toBeFocused) {
          toBeFocused.focus();
        }
      } else {
        var first = f.firstFocusable();
        if (modal.autoFocus && first) {
          first.focus();
        } else {
          modal.div.focus();
        }
      }
    });
  };
  DayPilot.Modal.close = function(result) {
    var opener = DayPilot.Modal.opener();
    if (!opener) {
      return;
    }
    opener.close(result);
  };
  DayPilot.Modal.stretch = function(result) {
    var opener = DayPilot.Modal.opener();
    if (!opener) {
      throw "Unable to find the opener DayPilot.Modal instance.";
    }
    opener.stretch();
  };
  DayPilot.Modal.closeSerialized = function() {
    var last = DayPilot.Modal.opener() || DayPilot.ModalStatic.last();
    if (last) {
      last.closeSerialized();
    }
  };
  DayPilot.Modal.opener = function() {
    if (typeof DayPilot !== "undefined" && typeof DayPilot.ModalStatic !== "undefined" && DayPilot.ModalStatic.list.length > 0) {
      return DayPilot.ModalStatic.list[DayPilot.ModalStatic.list.length - 1];
    }
    return parent && parent.DayPilot && parent.DayPilot.ModalStatic && parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length - 1];
  };
  DayPilot.Modal.Experimental = {};
  DayPilot.Modal.Experimental.Form = Form;
  if (typeof DayPilot.getPromise === "undefined") {
    DayPilot.getPromise = function(f) {
      if (typeof Promise !== "undefined") {
        return new Promise(f);
      }
      DayPilot.Promise = function(f2) {
        var p = this;
        this.then = function(onFulfilled, onRejected) {
          onFulfilled = onFulfilled || function() {
          };
          onRejected = onRejected || function() {
          };
          f2(onFulfilled, onRejected);
          return DayPilot.getPromise(f2);
        };
        this["catch"] = function(onRejected) {
          p.then(null, onRejected);
          return DayPilot.getPromise(f2);
        };
      };
      return new DayPilot.Promise(f);
    };
  }
})(local8);
var { Modal } = local8;
export {
  Modal
};
/*! Bundled license information:

@daypilot/modal/index.js:
  (* @license
  Copyright (c) 2010 - 2019 Annpoint, s.r.o.
  
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
  http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  
  -------------------------------------------------------------------------
  
  NOTE: Requires the following acknowledgement (see also NOTICE):
  
  This product includes DayPilot Modal (https://modal.daypilot.org).
  
  *)
*/
//# sourceMappingURL=@daypilot_modal.js.map
